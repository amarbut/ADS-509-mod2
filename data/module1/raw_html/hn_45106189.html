<html lang="en" op="item"><head><meta name="referrer" content="origin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" type="text/css" href="news.css?rdkg5pOPauT7LmsdOtnz"><link rel="icon" href="y18.svg"><link rel="canonical" href="https://news.ycombinator.com/item?id=45106189"><title>Python has had async for 10 years – why isn&#x27;t it more popular? | Hacker News</title></head><body><center><table id="hnmain" border="0" cellpadding="0" cellspacing="0" width="85%" bgcolor="#f6f6ef"><tr><td bgcolor="#ff6600"><table border="0" cellpadding="0" cellspacing="0" width="100%" style="padding:2px"><tr><td style="width:18px;padding-right:4px"><a href="https://news.ycombinator.com"><img src="y18.svg" width="18" height="18" style="border:1px white solid; display:block"></a></td><td style="line-height:12pt; height:10px;"><span class="pagetop"><b class="hnname"><a href="news">Hacker News</a></b><a href="newest">new</a> | <a href="front">past</a> | <a href="newcomments">comments</a> | <a href="ask">ask</a> | <a href="show">show</a> | <a href="jobs">jobs</a> | <a href="submit" rel="nofollow">submit</a></span></td><td style="text-align:right;padding-right:4px;"><span class="pagetop"><a href="login?goto=item%3Fid%3D45106189">login</a></span></td></tr></table></td></tr><tr style='height:10px'/><tr id="bigbox"><td><table class="fatitem" border="0"><tr class="athing submission" id="45106189"><td align="right" valign="top" class="title"><span class="rank"></span></td><td valign="top" class="votelinks"><center><a id='up_45106189' href='vote?id=45106189&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="title"><span class="titleline"><a href="https://tonybaloney.github.io/posts/why-isnt-python-async-more-popular.html">Python has had async for 10 years – why isn&#x27;t it more popular?</a><span class="sitebit comhead"> (<a href="from?site=tonybaloney.github.io"><span class="sitestr">tonybaloney.github.io</span></a>)</span></span></td></tr><tr><td colspan="2"></td><td class="subtext"><span class="subline"><span class="score" id="score_45106189">83 points</span> by <a href="user?id=willm" class="hnuser">willm</a> <span class="age" title="2025-09-02T17:24:57 1756833897"><a href="item?id=45106189">2 hours ago</a></span> <span id="unv_45106189"></span> | <a href="hide?id=45106189&amp;goto=item%3Fid%3D45106189">hide</a> | <a href="https://hn.algolia.com/?query=Python%20has%20had%20async%20for%2010%20years%20%E2%80%93%20why%20isn%27t%20it%20more%20popular%3F&type=story&dateRange=all&sort=byDate&storyText=false&prefix&page=0" class="hnpast">past</a> | <a href="fave?id=45106189&amp;auth=c15dff52b75a433d66e6283c65e5712de8cb595d">favorite</a> | <a href="item?id=45106189">106&nbsp;comments</a></span></td></tr><tr><td colspan="2"></td><td><div class="toptext"></div></td></tr><tr style='height:6px'/><tr><td colspan="2"></td><td><form action="comment" method="post"><input type="hidden" name="parent" value="45106189"><input type="hidden" name="goto" value="item?id=45106189"><input type="hidden" name="hmac" value="9a67363f267ed29a6c02ce0f08b66c3dc81cc893"><textarea name="text" rows="8" cols="80" wrap="virtual"></textarea><br><br>
<input type="submit" value="add comment"></form></td></tr></table><br>
<table border="0" class="comment-tree"><tr class="athing comtr" id="45106455"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106455' href='vote?id=45106455&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=atomicnumber3" class="hnuser">atomicnumber3</a> <span class="age" title="2025-09-02T17:41:21 1756834881"><a href="item?id=45106455">2 hours ago</a></span> <span id="unv_45106455"></span><span class="navs"> | <a href="#45107259" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106455" n="31" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">The author gets close to what I think the root problem is, but doesn&#x27;t call it out.<p>The truth is that in python, async was too little, too late. By the time it was introduced, most people who actually needed to do lots of io concurrently had their own workarounds (forking, etc) and people who didn&#x27;t actually need it had found out how to get by without it (multiprocessing etc).<p>Meanwhile, go showed us what good green threads can look like. Then java did it too. Meanwhile, js had better async support the whole time. But all it did was show us that async code just plain sucks compared to green thread code that can just block, instead of having to do the async dances.<p>So, why engage with it when you already had good solutions?</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106455&amp;goto=item%3Fid%3D45106189%2345106455" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106616"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45106616' href='vote?id=45106616&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=throw-qqqqq" class="hnuser">throw-qqqqq</a> <span class="age" title="2025-09-02T17:51:56 1756835516"><a href="item?id=45106616">2 hours ago</a></span> <span id="unv_45106616"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">parent</a> | <a href="#45107148" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106616" n="11" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">&gt; But all it did was show us that async code just plain sucks compared to green thread code that can just block, instead of having to do the async dances.<p>I take so much flak for this opinion at work, but I agree with you 100%.<p>Code that looks synchronous, but is really async, has funny failure modes and idiosyncracies, and I generally see more bugs in the async parts of our code at work.<p>Maybe I’m just old, but I don’t think it’s worth it. Syntactic sugar over continuations&#x2F;closures basically..</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106616&amp;goto=item%3Fid%3D45106189%2345106616" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106801"><td><table border="0"><tr><td class="ind" indent="2"><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_45106801' href='vote?id=45106801&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=lacker" class="hnuser">lacker</a> <span class="age" title="2025-09-02T18:04:01 1756836241"><a href="item?id=45106801">2 hours ago</a></span> <span id="unv_45106801"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">root</a> | <a href="#45106616" class="clicky" aria-hidden="true">parent</a> | <a href="#45106787" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106801" n="2" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">I&#x27;m confused, I feel like the two of you are expressing opposite opinions.<p>The comment you are responding to prefers green threads to be managed like goroutines, where the code looks synchronous, but really it&#x27;s cooperative multitasking managed by the runtime, to explicit async&#x2F;await.<p>But then you criticize &quot;code that looks synchronous but is really async&quot;. So you prefer the explicit &quot;async&quot; keywords? What exactly is your preferred model here?</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106801&amp;goto=item%3Fid%3D45106189%2345106801" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107191"><td><table border="0"><tr><td class="ind" indent="3"><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_45107191' href='vote?id=45107191&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=throw-qqqqq" class="hnuser">throw-qqqqq</a> <span class="age" title="2025-09-02T18:34:21 1756838061"><a href="item?id=45107191">1 hour ago</a></span> <span id="unv_45107191"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">root</a> | <a href="#45106801" class="clicky" aria-hidden="true">parent</a> | <a href="#45106787" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107191" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">First, I don’t mean to criticize anything or anyone. People value such things subjectively, but for me the async&#x2F;sync split does no good.<p>Goroutines feel like old-school, threaded code to me. I spawn a goroutine and interact with other “threads” through well defined IPC. I can’t tell if I’m spawning a green thread or a “real” system thread.<p>C#’s async&#x2F;await is different IMO and I prefer the other model. I think the async-concept gets overused (at my workplace at least).<p>If you know Haskell, I would compare it to overuse of laziness, when strictness would likely use fewer resources and be much easier to reason about. I see many of the same problems&#x2F;bugs with async&#x2F;await..</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107191&amp;goto=item%3Fid%3D45106189%2345107191" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106787"><td><table border="0"><tr><td class="ind" indent="2"><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_45106787' href='vote?id=45106787&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=kibwen" class="hnuser">kibwen</a> <span class="age" title="2025-09-02T18:03:09 1756836189"><a href="item?id=45106787">2 hours ago</a></span> <span id="unv_45106787"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">root</a> | <a href="#45106616" class="clicky" aria-hidden="true">parent</a> | <a href="#45106801" class="clicky" aria-hidden="true">prev</a> | <a href="#45106917" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106787" n="6" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00"><i>&gt; Code that looks synchronous, but is really async, has funny failure modes and idiosyncracies</i><p>But this appears to be describing languages with green threads, rather than languages that make async explicit.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106787&amp;goto=item%3Fid%3D45106189%2345106787" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106901"><td><table border="0"><tr><td class="ind" indent="3"><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_45106901' href='vote?id=45106901&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=pclmulqdq" class="hnuser">pclmulqdq</a> <span class="age" title="2025-09-02T18:11:59 1756836719"><a href="item?id=45106901">2 hours ago</a></span> <span id="unv_45106901"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">root</a> | <a href="#45106787" class="clicky" aria-hidden="true">parent</a> | <a href="#45106917" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106901" n="5" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Without the &quot;async&quot; keyword, you can still write async code. It looks totally different because you have to control the state machine of task scheduling. Green threads are a step further than the async keyword because they have none of the function coloring stuff.<p>You may think of use of an async keyword as explicit async code but that is very much not the case.<p>If you want to see async code without the keyword, most of the code of Linux is asynchronous.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106901&amp;goto=item%3Fid%3D45106189%2345106901" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107497"><td><table border="0"><tr><td class="ind" indent="4"><img src="s.gif" height="1" width="160"></td><td valign="top" class="votelinks"><center><a id='up_45107497' href='vote?id=45107497&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=throw-qqqqq" class="hnuser">throw-qqqqq</a> <span class="age" title="2025-09-02T18:57:20 1756839440"><a href="item?id=45107497">1 hour ago</a></span> <span id="unv_45107497"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">root</a> | <a href="#45106901" class="clicky" aria-hidden="true">parent</a> | <a href="#45107465" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107497" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">This is exactly what I mean.<p>Thank you for explaining much more clearly than I could.<p>&gt; none of the function coloring stuff<p>And it’s this part that I don’t like (and see colleagues struggling to implement correctly at work).</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107497&amp;goto=item%3Fid%3D45106189%2345107497" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107465"><td><table border="0"><tr><td class="ind" indent="4"><img src="s.gif" height="1" width="160"></td><td valign="top" class="votelinks"><center><a id='up_45107465' href='vote?id=45107465&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=Dylan16807" class="hnuser">Dylan16807</a> <span class="age" title="2025-09-02T18:55:31 1756839331"><a href="item?id=45107465">1 hour ago</a></span> <span id="unv_45107465"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">root</a> | <a href="#45106901" class="clicky" aria-hidden="true">parent</a> | <a href="#45107497" class="clicky" aria-hidden="true">prev</a> | <a href="#45106917" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107465" n="3" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Having to put &quot;await&quot; everywhere is very explicit.  I&#x27;d even say it&#x27;s equally explicit to a bunch of awkward closures.  Why do you say it&#x27;s less?</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107465&amp;goto=item%3Fid%3D45106189%2345107465" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107736"><td><table border="0"><tr><td class="ind" indent="5"><img src="s.gif" height="1" width="200"></td><td valign="top" class="votelinks"><center><a id='up_45107736' href='vote?id=45107736&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=pclmulqdq" class="hnuser">pclmulqdq</a> <span class="age" title="2025-09-02T19:17:55 1756840675"><a href="item?id=45107736">1 hour ago</a></span> <span id="unv_45107736"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">root</a> | <a href="#45107465" class="clicky" aria-hidden="true">parent</a> | <a href="#45107594" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107736" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">It&#x27;s explicit that the code is async, but how the asynchrony happens is completely implicit with async&#x2F;await, and is managed by a runtime of some kind.<p>Kernel-style async code, where everything is explicit:<p>* You write a poller that opens up queues and reads structs representing work<p>* Your functions are not tagged as &quot;async&quot; but they do not block<p>* When those functions finish, you explicitly put that struct in another queue based on the result<p>Async-await code, where the runtime is implicit:<p>* All async functions are marked and you await them if they might block<p>* A runtime of some sort handles queueing and runnability<p>Green threads, where all asynchrony is implicit:<p>* Functions are functions and can block<p>* A runtime wraps everything that can block to switch to other local work before yielding back to the kernel</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107736&amp;goto=item%3Fid%3D45106189%2345107736" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107594"><td><table border="0"><tr><td class="ind" indent="5"><img src="s.gif" height="1" width="200"></td><td valign="top" class="votelinks"><center><a id='up_45107594' href='vote?id=45107594&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=throw-qqqqq" class="hnuser">throw-qqqqq</a> <span class="age" title="2025-09-02T19:04:54 1756839894"><a href="item?id=45107594">1 hour ago</a></span> <span id="unv_45107594"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">root</a> | <a href="#45107465" class="clicky" aria-hidden="true">parent</a> | <a href="#45107736" class="clicky" aria-hidden="true">prev</a> | <a href="#45106917" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107594" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">&gt; Why do you say it&#x27;s less<p>Let me try to clarify my point of view:<p>I don’t mean that async&#x2F;await is more or less explicit than goroutines. I mean regular threaded code is more explicit than async&#x2F;await code, and I prefer that.<p>I see colleagues struggle to correctly analyze resource usage for instance. Someone tries to parallelize some code (perhaps naiively) by converting it to async&#x2F;await and then run out of memory.<p>Again, I don’t mean to judge anyone. I just observe that the async&#x2F;await-flavor has more bugs in the code bases I work on.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107594&amp;goto=item%3Fid%3D45106189%2345107594" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106917"><td><table border="0"><tr><td class="ind" indent="2"><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_45106917' href='vote?id=45106917&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=larusso" class="hnuser">larusso</a> <span class="age" title="2025-09-02T18:13:18 1756836798"><a href="item?id=45106917">2 hours ago</a></span> <span id="unv_45106917"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">root</a> | <a href="#45106616" class="clicky" aria-hidden="true">parent</a> | <a href="#45106787" class="clicky" aria-hidden="true">prev</a> | <a href="#45107148" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106917" n="2" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">async is like a virus. I think the implementation in js and .NET is somewhat ok’ish because your code is inside an async context most of the time. I really hate the red &#x2F; blue method issues where library functions get harder to compose. Oh I have a normal method because there was no need for async. Now I change the implementation and need to call an async method. There are ways around this but more often than not will you change most methods to be async.<p>To be fair that also happens with other solutions.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106917&amp;goto=item%3Fid%3D45106189%2345106917" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45108296"><td><table border="0"><tr><td class="ind" indent="3"><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_45108296' href='vote?id=45108296&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=DanielHB" class="hnuser">DanielHB</a> <span class="age" title="2025-09-02T20:03:21 1756843401"><a href="item?id=45108296">15 minutes ago</a></span> <span id="unv_45108296"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">root</a> | <a href="#45106917" class="clicky" aria-hidden="true">parent</a> | <a href="#45107148" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45108296" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">It is not nearly as much of a problem in JS because JS only has an event loop, there is no way to mix in threads with async code because there are no threads. Makes everything a lot simpler and a lot of the data structures a lot faster (because no locks required). But actual parallelization (instead of just concurrency) is impossible<i>.<p>A lot of the async problems in other languages is because they haven&#x27;t bought up into the concept fully with some 3rd party code using it and some don&#x27;t. JS went all-in with async.<p></i>: Yes I know about service workers, but they are not threads in the sense that there is no shared memory<i>. It is good for some types of parallelization problems, but not others because of all the memory copying required.<p></i>2: Yes I know about SharedArrayBuffer and there is a bunch of proposals to add support for locks and all that fun stuff to them, which also brings all the complexity back.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45108296&amp;goto=item%3Fid%3D45106189%2345108296" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107148"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45107148' href='vote?id=45107148&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=pnathan" class="hnuser">pnathan</a> <span class="age" title="2025-09-02T18:31:16 1756837876"><a href="item?id=45107148">1 hour ago</a></span> <span id="unv_45107148"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">parent</a> | <a href="#45106616" class="clicky" aria-hidden="true">prev</a> | <a href="#45107247" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107148" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Async taints code, and async&#x2F;await fall prey to classic cooperative multitasking issues. &quot;What do you mean that this blocked that?&quot;<p>The memory and execution model for higher level work needs to not have async. Go is the canonical example of it done well from the user standpoint IMO.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107148&amp;goto=item%3Fid%3D45106189%2345107148" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107247"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45107247' href='vote?id=45107247&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=b33j0r" class="hnuser">b33j0r</a> <span class="age" title="2025-09-02T18:39:16 1756838356"><a href="item?id=45107247">1 hour ago</a></span> <span id="unv_45107247"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">parent</a> | <a href="#45107148" class="clicky" aria-hidden="true">prev</a> | <a href="#45106758" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107247" n="5" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">For me, once I wanted to scale asyncio within one process (scaling horizontally on top of that), only two things made sense: rust with tokio or node.js.<p>Doing async in python has the same fundamental design. You have an executer, a scheduler, and event-driven wakers on futures or promises. But you’re doing it in a fundamentally hand-cuffed environment.<p>You don’t get benefits like static compilation, real work-stealing, a large library ecosystem, or crazy performance boosts. Except in certain places in the stack.<p>Using fastapi with async is a game-changer. Writing a cli to download a bunch of stuff in parallel is great.<p>But if you want to use async to parse faster or make a parallel-friendly GUI, you are more than likely wasting your time using python. The benefits will be bottlenecked by other language design features. Still the GIL mostly.<p>I guess there is no reason you can’t make tokio in python with multiprocessing or subinterpreters, but to my knowledge that hasn’t been done.<p>Learning tokio was way more fun, too.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107247&amp;goto=item%3Fid%3D45106189%2345107247" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107510"><td><table border="0"><tr><td class="ind" indent="2"><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_45107510' href='vote?id=45107510&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=ciupicri" class="hnuser">ciupicri</a> <span class="age" title="2025-09-02T18:58:19 1756839499"><a href="item?id=45107510">1 hour ago</a></span> <span id="unv_45107510"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">root</a> | <a href="#45107247" class="clicky" aria-hidden="true">parent</a> | <a href="#45107352" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107510" n="2" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">GIL is not part of the language design, it&#x27;s just a detail of the most common implementation - CPython.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107510&amp;goto=item%3Fid%3D45106189%2345107510" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107559"><td><table border="0"><tr><td class="ind" indent="3"><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_45107559' href='vote?id=45107559&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=b33j0r" class="hnuser">b33j0r</a> <span class="age" title="2025-09-02T19:02:21 1756839741"><a href="item?id=45107559">1 hour ago</a></span> <span id="unv_45107559"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">root</a> | <a href="#45107510" class="clicky" aria-hidden="true">parent</a> | <a href="#45107352" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107559" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Fair and accurate. But that’s pretty much what people use, right?<p>I am happy to hear stories of using pypy or something to radically improve an architecture. I don’t have any from personal experience.<p>I guess twisted and stackless, a long time ago.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107559&amp;goto=item%3Fid%3D45106189%2345107559" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107352"><td><table border="0"><tr><td class="ind" indent="2"><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_45107352' href='vote?id=45107352&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=smw" class="hnuser">smw</a> <span class="age" title="2025-09-02T18:47:13 1756838833"><a href="item?id=45107352">1 hour ago</a></span> <span id="unv_45107352"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">root</a> | <a href="#45107247" class="clicky" aria-hidden="true">parent</a> | <a href="#45107510" class="clicky" aria-hidden="true">prev</a> | <a href="#45106758" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107352" n="2" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Or just golang?</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107352&amp;goto=item%3Fid%3D45106189%2345107352" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107484"><td><table border="0"><tr><td class="ind" indent="3"><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_45107484' href='vote?id=45107484&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=iknowstuff" class="hnuser">iknowstuff</a> <span class="age" title="2025-09-02T18:56:31 1756839391"><a href="item?id=45107484">1 hour ago</a></span> <span id="unv_45107484"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">root</a> | <a href="#45107352" class="clicky" aria-hidden="true">parent</a> | <a href="#45106758" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107484" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c5A">Segfaults</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107484&amp;goto=item%3Fid%3D45106189%2345107484" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106758"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45106758' href='vote?id=45106758&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=gen220" class="hnuser">gen220</a> <span class="age" title="2025-09-02T18:01:51 1756836111"><a href="item?id=45106758">2 hours ago</a></span> <span id="unv_45106758"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">parent</a> | <a href="#45107247" class="clicky" aria-hidden="true">prev</a> | <a href="#45107865" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106758" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">As somebody who&#x27;s written and maintained a good bit of Python in prod and recently a good amount of server-side typescript... this would be my answer.<p>I&#x27;d add one other aspect that we sort of take for granted these days, but affordable multi-threaded CPUs have <i>really</i> taken off in the last 10 years.<p>Not only does the stack based on green-threads &quot;just work&quot; without coloring your codebase with async&#x2F;no-async, it allows you to scale a single compute instance gracefully to 1 instance with N vCPUs vs N pods of 2-vCPU instances.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106758&amp;goto=item%3Fid%3D45106189%2345106758" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107865"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45107865' href='vote?id=45107865&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=gshulegaard" class="hnuser">gshulegaard</a> <span class="age" title="2025-09-02T19:26:49 1756841209"><a href="item?id=45107865">52 minutes ago</a></span> <span id="unv_45107865"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">parent</a> | <a href="#45106758" class="clicky" aria-hidden="true">prev</a> | <a href="#45107048" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107865" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">I also think asyncio missed the mark when it comes to it&#x27;s API design.  There are a lot of quirks and rough edges to it that, as someone who was using `gevent` heavily before, strike me as curious and even anti-productive.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107865&amp;goto=item%3Fid%3D45106189%2345107865" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107048"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45107048' href='vote?id=45107048&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=jayd16" class="hnuser">jayd16</a> <span class="age" title="2025-09-02T18:23:44 1756837424"><a href="item?id=45107048">1 hour ago</a></span> <span id="unv_45107048"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">parent</a> | <a href="#45107865" class="clicky" aria-hidden="true">prev</a> | <a href="#45106558" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107048" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">&gt;  But all it did was show us that async code just plain sucks compared to green thread code that can just block, instead of having to do the async dances.<p>I&#x27;ll be sold on this when a green thread native UI paradigm becomes popular but it seems like all the languages with good native UI stories have async support.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107048&amp;goto=item%3Fid%3D45106189%2345107048" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106558"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45106558' href='vote?id=45106558&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=neuroelectron" class="hnuser">neuroelectron</a> <span class="age" title="2025-09-02T17:47:50 1756835270"><a href="item?id=45106558">2 hours ago</a></span> <span id="unv_45106558"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">parent</a> | <a href="#45107048" class="clicky" aria-hidden="true">prev</a> | <a href="#45106663" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106558" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Even in Java, async is rarely the right solution. I&#x27;m sure in situations where it&#x27;s needed, Python&#x27;s async would be used. For instance, it would be good for reducing resource usage in any kind of small service that dynamically scales. The workarounds are much more expensive but that doesn&#x27;t matter unless you&#x27;re already resource constrained.<p>Even then, nginx might be a netter solution.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106558&amp;goto=item%3Fid%3D45106189%2345106558" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106663"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45106663' href='vote?id=45106663&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=parhamn" class="hnuser">parhamn</a> <span class="age" title="2025-09-02T17:55:05 1756835705"><a href="item?id=45106663">2 hours ago</a></span> <span id="unv_45106663"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">parent</a> | <a href="#45106558" class="clicky" aria-hidden="true">prev</a> | <a href="#45106659" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106663" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">pair this with needing async in depth and that&#x27;s exactly it. The whole network stack needs to be async-first and all the popular networking libraries need to have been built on that. Many of those libraries are already C-extension based and don&#x27;t jibe well with the newer python parts in any way.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106663&amp;goto=item%3Fid%3D45106189%2345106663" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106659"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45106659' href='vote?id=45106659&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=ddorian43" class="hnuser">ddorian43</a> <span class="age" title="2025-09-02T17:54:49 1756835689"><a href="item?id=45106659">2 hours ago</a></span> <span id="unv_45106659"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">parent</a> | <a href="#45106663" class="clicky" aria-hidden="true">prev</a> | <a href="#45107701" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106659" n="3" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Because it sucks compared to gevent (green threads). But for some reason, people always disregard this option. They don&#x27;t even read it. Like any comment with gevent is shadowbanned and it doesn&#x27;t register in their mind.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106659&amp;goto=item%3Fid%3D45106189%2345106659" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107159"><td><table border="0"><tr><td class="ind" indent="2"><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_45107159' href='vote?id=45107159&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=nromiun" class="hnuser">nromiun</a> <span class="age" title="2025-09-02T18:32:03 1756837923"><a href="item?id=45107159">1 hour ago</a></span> <span id="unv_45107159"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">root</a> | <a href="#45106659" class="clicky" aria-hidden="true">parent</a> | <a href="#45107261" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107159" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Gevent is too underrated. Even if people don&#x27;t like the monkey patching you can simply use the gevent namespace API as well. No idea why people prefer the absolute mess that is Python async ecosystem.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107159&amp;goto=item%3Fid%3D45106189%2345107159" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107261"><td><table border="0"><tr><td class="ind" indent="2"><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_45107261' href='vote?id=45107261&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=jononor" class="hnuser">jononor</a> <span class="age" title="2025-09-02T18:40:19 1756838419"><a href="item?id=45107261">1 hour ago</a></span> <span id="unv_45107261"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">root</a> | <a href="#45106659" class="clicky" aria-hidden="true">parent</a> | <a href="#45107159" class="clicky" aria-hidden="true">prev</a> | <a href="#45107701" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107261" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Happily using gevent for our backend (IoT+ML) since 2019. Was very glad when I saw it is still being well supported by recent SQLAlchemy and pscycopg releases.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107261&amp;goto=item%3Fid%3D45106189%2345107261" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107701"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45107701' href='vote?id=45107701&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=pulse7" class="hnuser">pulse7</a> <span class="age" title="2025-09-02T19:14:30 1756840470"><a href="item?id=45107701">1 hour ago</a></span> <span id="unv_45107701"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">parent</a> | <a href="#45106659" class="clicky" aria-hidden="true">prev</a> | <a href="#45106684" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107701" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c5A">&quot;Then java did it too.&quot; Java had green threads in 1.0. They were removed. Then Java added virtual threads.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107701&amp;goto=item%3Fid%3D45106189%2345107701" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106684"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45106684' href='vote?id=45106684&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=JackSlateur" class="hnuser">JackSlateur</a> <span class="age" title="2025-09-02T17:56:14 1756835774"><a href="item?id=45106684">2 hours ago</a></span> <span id="unv_45106684"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">parent</a> | <a href="#45107701" class="clicky" aria-hidden="true">prev</a> | <a href="#45107394" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106684" n="3" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">green thread have pitfalls too, like this: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=39008026">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=39008026</a></div><div class="reply"><p><font size="1"><u><a href="reply?id=45106684&amp;goto=item%3Fid%3D45106189%2345106684" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107095"><td><table border="0"><tr><td class="ind" indent="2"><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_45107095' href='vote?id=45107095&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=kasperni" class="hnuser">kasperni</a> <span class="age" title="2025-09-02T18:27:31 1756837651"><a href="item?id=45107095">1 hour ago</a></span> <span id="unv_45107095"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">root</a> | <a href="#45106684" class="clicky" aria-hidden="true">parent</a> | <a href="#45106788" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107095" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">This was a known issue and was fixed in Java 24 [1].<p>[1] <a href="https:&#x2F;&#x2F;openjdk.org&#x2F;jeps&#x2F;491" rel="nofollow">https:&#x2F;&#x2F;openjdk.org&#x2F;jeps&#x2F;491</a></div><div class="reply"><p><font size="1"><u><a href="reply?id=45107095&amp;goto=item%3Fid%3D45106189%2345107095" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106788"><td><table border="0"><tr><td class="ind" indent="2"><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_45106788' href='vote?id=45106788&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=ronsor" class="hnuser">ronsor</a> <span class="age" title="2025-09-02T18:03:22 1756836202"><a href="item?id=45106788">2 hours ago</a></span> <span id="unv_45106788"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">root</a> | <a href="#45106684" class="clicky" aria-hidden="true">parent</a> | <a href="#45107095" class="clicky" aria-hidden="true">prev</a> | <a href="#45107394" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106788" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c73">This doesn&#x27;t look like a problem with green threads so much as it is a problem with Java&#x27;s implementation of them. Of course, Java is known for having problems with its implementations of many different things, such as sandboxing; this isn&#x27;t special.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106788&amp;goto=item%3Fid%3D45106189%2345106788" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107394"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45107394' href='vote?id=45107394&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=pbalau" class="hnuser">pbalau</a> <span class="age" title="2025-09-02T18:51:02 1756839062"><a href="item?id=45107394">1 hour ago</a></span> <span id="unv_45107394"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">parent</a> | <a href="#45106684" class="clicky" aria-hidden="true">prev</a> | <a href="#45107259" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107394" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c73">You make a very good case for why python&#x27;s async isn&#x27;t more prevalent, but I think this is not painting the full image.<p>Taking a general case, let&#x27;s say a forum, in order to render a thread one needs to search for all posts from that thread, then get all the extra data needed for rendering and finally send the rendered output to the client.<p>In the &quot;regular&quot; way of doing this, one will compose a query, that will filter things out, join all the required data bla bla, send it to the database, wait for the answer from the database and all the data to be transferred over, loop over the results and do some rendering and send the thing over to the client.<p>It doesn&#x27;t matter how async your app code is, in this way of doing things, the bottle neck is the database, as there is a fixed limit on how many things a db server can do at once and if doing one of these things takes a long time, you still end up waiting too much.<p>In order for async to work, one needs to split the work load into very small chunks that can be done in parallel and very fast, therefore, sending a big query and waiting for all the result data is out of the window.<p>An async approach would split the db query into a search query, that returns a list of object ids, say posts, then create N number of async tasks that given a post id will return a rendered result. These tasks will do their own query to retrieve the post data, then assemble another list of async tasks to get all the other data required and render each chunk and so on. Throw in a bunch of db replicas and you get the benefits of async.<p>This approach is not generally used, because, let&#x27;s face it, we like making the systems we use do complicated things, eg complicated sql requests.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107394&amp;goto=item%3Fid%3D45106189%2345107394" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107259"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45107259' href='vote?id=45107259&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=xg15" class="hnuser">xg15</a> <span class="age" title="2025-09-02T18:40:16 1756838416"><a href="item?id=45107259">1 hour ago</a></span> <span id="unv_45107259"></span><span class="navs"> | <a href="#45106455" class="clicky" aria-hidden="true">prev</a> | <a href="#45108340" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107259" n="4" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">I learned about the concept of async&#x2F;await from JS and back then was really amazed by the elegance of it.<p>By now, the downsides are well-known, but I think Python&#x27;s implementation did a few things that made it particularly unpleasant to use.<p>There is the usual &quot;colored functions&quot; problem. Python has that too, but on steroids: There are sync and async functions, but then some of the sync functions <i>can only</i> be called from an async function, because they expect an event loop to be present, while others <i>must not</i> be called from an async function because they block the thread or take a lot of CPU to run or just refuse to run if an event loop is detected. That makes at least four colors.<p>The API has the same complexity: In JS, there are 3 primitives that you interact with in code: Sync functions, async functions and promises. (Understanding the event loop is needed to reason about the program, but it&#x27;s never visible in the code).<p>Whereas Python has: Generators, Coroutines, Awaitables, Futures, Tasks, Event Loops, AsyncIterators and probably a few more.<p>All that for not much benefit in everyday situations. One of the biggest advantages of async&#x2F;await was &quot;fearless concurrency&quot;: The guarantee that your variables can only change at well-defined await points, and can only change &quot;atomically&quot;. However, python can&#x27;t actually give the first guarantee, because threaded code may run in parallel to your async code. The second guarantee already comes for free in all Python code, thanks to the GIL - you don&#x27;t need async for that.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107259&amp;goto=item%3Fid%3D45106189%2345107259" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107536"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45107536' href='vote?id=45107536&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=gloomyday" class="hnuser">gloomyday</a> <span class="age" title="2025-09-02T19:00:08 1756839608"><a href="item?id=45107536">1 hour ago</a></span> <span id="unv_45107536"></span><span class="navs"> | <a href="#45107259" class="clicky" aria-hidden="true">parent</a> | <a href="#45107307" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107536" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">I remember trying to use async in Python for the first time in 2017, and I actually found it easier to learn the basics of Go to create a coroutine, export it as a shared library, and create the bindings. I&#x27;m not exaggerating.<p>If I remember correctly, the Python async API was still in experimental phase at that time.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107536&amp;goto=item%3Fid%3D45106189%2345107536" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107307"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45107307' href='vote?id=45107307&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=Retr0id" class="hnuser">Retr0id</a> <span class="age" title="2025-09-02T18:43:41 1756838621"><a href="item?id=45107307">1 hour ago</a></span> <span id="unv_45107307"></span><span class="navs"> | <a href="#45107259" class="clicky" aria-hidden="true">parent</a> | <a href="#45107536" class="clicky" aria-hidden="true">prev</a> | <a href="#45108340" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107307" n="2" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">&gt; some of the sync functions can only be called from an async function, because they expect an event loop to be present<p>I recognise that this situation is possible, but I don&#x27;t think I&#x27;ve ever seen it happen. Can you give an example?</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107307&amp;goto=item%3Fid%3D45106189%2345107307" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45108032"><td><table border="0"><tr><td class="ind" indent="2"><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_45108032' href='vote?id=45108032&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=xg15" class="hnuser">xg15</a> <span class="age" title="2025-09-02T19:40:09 1756842009"><a href="item?id=45108032">38 minutes ago</a></span> <span id="unv_45108032"></span><span class="navs"> | <a href="#45107259" class="clicky" aria-hidden="true">root</a> | <a href="#45107307" class="clicky" aria-hidden="true">parent</a> | <a href="#45108340" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45108032" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Everything that directly interacts with an event loop object and calls methods such as loop.call_soon() [1].<p>This is used by most of asyncio&#x27;s synchronization primitives, e.g. async.Queue.<p>A consequence is that you cannot use asyncio Queues to pass messages or work items between async functions and worker threads. (And of course you can&#x27;t use regular blocking queues either, because they would block).<p>The only solution is to build your own ad-hoc system using loop.call_soon_threadsafe() or use third-party libs like Janus[2].<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;python&#x2F;cpython&#x2F;blob&#x2F;e4e2390a64593b33d65567179265f9c2cd9acae1&#x2F;Lib&#x2F;asyncio&#x2F;base_events.py#L817" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;python&#x2F;cpython&#x2F;blob&#x2F;e4e2390a64593b33d6556...</a><p>[2] <a href="https:&#x2F;&#x2F;github.com&#x2F;aio-libs&#x2F;janus" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;aio-libs&#x2F;janus</a></div><div class="reply"><p><font size="1"><u><a href="reply?id=45108032&amp;goto=item%3Fid%3D45106189%2345108032" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45108340"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45108340' href='vote?id=45108340&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=foresto" class="hnuser">foresto</a> <span class="age" title="2025-09-02T20:08:31 1756843711"><a href="item?id=45108340">10 minutes ago</a></span> <span id="unv_45108340"></span><span class="navs"> | <a href="#45107259" class="clicky" aria-hidden="true">prev</a> | <a href="#45106346" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45108340" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">A little history...<p>During development, asyncio was called tulip. A quick search turns up this talk by Guido:<p><a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=aurOB4qYuFM" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=aurOB4qYuFM</a><p>I seem to recall that Guido was in touch with the author of Twisted at the time, so design ideas from that project may have helped shape asyncio.<p><a href="https:&#x2F;&#x2F;twisted.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;twisted.org&#x2F;</a><p>Before asyncio, Python had asyncore, a minimal event loop&#x2F;callback module. I think it was was introduced in Python 1.5.2, and remained part of the standard library until 3.12.<p><a href="https:&#x2F;&#x2F;docs.python.org&#x2F;3.11&#x2F;library&#x2F;asyncore.html" rel="nofollow">https:&#x2F;&#x2F;docs.python.org&#x2F;3.11&#x2F;library&#x2F;asyncore.html</a><p><a href="https:&#x2F;&#x2F;docs.python.org&#x2F;3.11&#x2F;library&#x2F;asynchat.html" rel="nofollow">https:&#x2F;&#x2F;docs.python.org&#x2F;3.11&#x2F;library&#x2F;asynchat.html</a></div><div class="reply"><p><font size="1"><u><a href="reply?id=45108340&amp;goto=item%3Fid%3D45106189%2345108340" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106346"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106346' href='vote?id=45106346&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=PaulHoule" class="hnuser">PaulHoule</a> <span class="age" title="2025-09-02T17:34:02 1756834442"><a href="item?id=45106346">2 hours ago</a></span> <span id="unv_45106346"></span><span class="navs"> | <a href="#45108340" class="clicky" aria-hidden="true">prev</a> | <a href="#45106733" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106346" n="5" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">I went through a phase of writing asyncio servers for my side projects.  Probably the most fun I had was writing things that were responsive in complex ways,  such as a websockets server that was also listening on message queues or on a TCP connection to a Denon HEOS music player.<p>Eventually I wrote an &quot;image sorter&quot; that I found was hanging up when the browser was trying to download images in parallel,  the image serving should not have been CPU bound,  I was even using sendfile(),  but I think other requests would hold up the CPU and would be block the tiny amount of CPU needed to set up that sendfile.<p>So I switched from aiohttp to the flask API and serve with either Flask or Gunicorn,  I even front it with Microsoft IIS or nginx to handle the images so Python doesn&#x27;t have to.  It is a minor hassle because I develop on Windows so I have to run Gunicorn inside WSL2 but it works great and I don&#x27;t have to think about server performance anymore.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106346&amp;goto=item%3Fid%3D45106189%2345106346" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106551"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45106551' href='vote?id=45106551&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=tdumitrescu" class="hnuser">tdumitrescu</a> <span class="age" title="2025-09-02T17:47:03 1756835223"><a href="item?id=45106551">2 hours ago</a></span> <span id="unv_45106551"></span><span class="navs"> | <a href="#45106346" class="clicky" aria-hidden="true">parent</a> | <a href="#45106733" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106551" n="4" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">That&#x27;s the main problem with evented servers in general isn&#x27;t it? If any one of your workloads is cpu-intensive, it has the potential to block the serving of everything else on the same thread, so requests that should always be snappy can end up taking randomly long times in practice. Basically if you have any cpu-heavy work, it shouldn&#x27;t go in that same server.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106551&amp;goto=item%3Fid%3D45106189%2345106551" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45108270"><td><table border="0"><tr><td class="ind" indent="2"><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_45108270' href='vote?id=45108270&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=PaulHoule" class="hnuser">PaulHoule</a> <span class="age" title="2025-09-02T20:00:20 1756843220"><a href="item?id=45108270">18 minutes ago</a></span> <span id="unv_45108270"></span><span class="navs"> | <a href="#45106346" class="clicky" aria-hidden="true">root</a> | <a href="#45106551" class="clicky" aria-hidden="true">parent</a> | <a href="#45106641" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45108270" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">My system is written in Python because it is supported by a number of batch jobs that use code from SBERT, scikit-learn, numpy and such.  Currently the server doesn&#x27;t do any complex calculations but under asyncio it was a strict no-no.  Mostly it does database queries and formats HTML responses but it seems like that is still too much CPU.<p>My take on gunicorn is that it doesn&#x27;t need any tuning or care to handle anything up to the large workgroup size other than maybe &quot;buy some more RAM&quot; -- and now if I want to do some inference in the server or use pandas to generate a report I can do it.<p>If I had to go bigger I probably wouldn&#x27;t be using Python in the server and would have to face up to either dual language or doing the ML work in a different way.  I&#x27;m a little intimidated about being on the public web in 2025 though with all the bad webcrawlers.  Young &#x27;uns just never learned everything that webcrawler authors knew in 1999.  In 2010 there were just two bad Chinese webcrawlers that never sent a lick of traffic to anglophone sites, but now there are new bad webcrawlers every day it seems.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45108270&amp;goto=item%3Fid%3D45106189%2345108270" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106641"><td><table border="0"><tr><td class="ind" indent="2"><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_45106641' href='vote?id=45106641&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=acdha" class="hnuser">acdha</a> <span class="age" title="2025-09-02T17:53:33 1756835613"><a href="item?id=45106641">2 hours ago</a></span> <span id="unv_45106641"></span><span class="navs"> | <a href="#45106346" class="clicky" aria-hidden="true">root</a> | <a href="#45106551" class="clicky" aria-hidden="true">parent</a> | <a href="#45108270" class="clicky" aria-hidden="true">prev</a> | <a href="#45107229" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106641" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Indeed. async is one of those things which makes a big difference in a handful of scenarios but which got promoted as a best-practice for everything. Python developers have simply joined Node and Go developers in learning that it’s not magic “go faster” spray and reasoning about things like peak memory load or shared resource management can be harder.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106641&amp;goto=item%3Fid%3D45106189%2345106641" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107229"><td><table border="0"><tr><td class="ind" indent="2"><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_45107229' href='vote?id=45107229&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=nly" class="hnuser">nly</a> <span class="age" title="2025-09-02T18:38:02 1756838282"><a href="item?id=45107229">1 hour ago</a></span> <span id="unv_45107229"></span><span class="navs"> | <a href="#45106346" class="clicky" aria-hidden="true">root</a> | <a href="#45106551" class="clicky" aria-hidden="true">parent</a> | <a href="#45106641" class="clicky" aria-hidden="true">prev</a> | <a href="#45106733" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107229" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">OS threads are for CPU bound work.<p>Async is for juggling lots of little initialisations, completions, and coordinating work.<p>Many apps are best single threaded with a thread pool to run (single threaded) long running tasks.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107229&amp;goto=item%3Fid%3D45106189%2345107229" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106733"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106733' href='vote?id=45106733&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=svieira" class="hnuser">svieira</a> <span class="age" title="2025-09-02T18:00:00 1756836000"><a href="item?id=45106733">2 hours ago</a></span> <span id="unv_45106733"></span><span class="navs"> | <a href="#45106346" class="clicky" aria-hidden="true">prev</a> | <a href="#45106599" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106733" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">I used to keep plugging Unyielding [1] vs. What Color Is Your Function [2] as the right matrix to view these issues within.  But then Notes on structured concurrency [3]
was written and I just point to that these days.<p>But, to sum it all up for those who want to talk here, there are several ways to look at concurrency but only one that matters.  Is my program correct?  How long will it take to make my program correct?  Structured concurrency makes that clear(er) in the syntax of the language.  Unstructured concurrency requires that you hold all the code in your head.<p>[1]: <a href="https:&#x2F;&#x2F;glyph.twistedmatrix.com&#x2F;2014&#x2F;02&#x2F;unyielding.html" rel="nofollow">https:&#x2F;&#x2F;glyph.twistedmatrix.com&#x2F;2014&#x2F;02&#x2F;unyielding.html</a><p>[2]: <a href="https:&#x2F;&#x2F;journal.stuffwithstuff.com&#x2F;2015&#x2F;02&#x2F;01&#x2F;what-color-is-your-function&#x2F;" rel="nofollow">https:&#x2F;&#x2F;journal.stuffwithstuff.com&#x2F;2015&#x2F;02&#x2F;01&#x2F;what-color-is-...</a><p>[3]: <a href="https:&#x2F;&#x2F;vorpus.org&#x2F;blog&#x2F;notes-on-structured-concurrency-or-go-statement-considered-harmful&#x2F;" rel="nofollow">https:&#x2F;&#x2F;vorpus.org&#x2F;blog&#x2F;notes-on-structured-concurrency-or-g...</a></div><div class="reply"><p><font size="1"><u><a href="reply?id=45106733&amp;goto=item%3Fid%3D45106189%2345106733" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106599"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106599' href='vote?id=45106599&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=rybosome" class="hnuser">rybosome</a> <span class="age" title="2025-09-02T17:50:26 1756835426"><a href="item?id=45106599">2 hours ago</a></span> <span id="unv_45106599"></span><span class="navs"> | <a href="#45106733" class="clicky" aria-hidden="true">prev</a> | <a href="#45108361" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106599" n="3" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">I suppose my negative experiences with async fall under #3, that it is hard to maintain two APIs.<p>One of the most memorable &quot;real software engineering&quot; bugs of my career involved async Python. I was maintaining a FastAPI server which was consistently leaking file descriptors when making any outgoing HTTP requests due to failing to close the socket. This manifested in a few ways: once the server ran out of available file descriptors, it degraded to a bizarre world where it would accept new HTTP requests but then refuse to transmit any information, which was also exciting due to increasing the difficulty of remotely debugging this. Occasionally the server would run out of memory before running out of file descriptors on the OS, which was a fun red herring that resulted in at least one premature &quot;I fixed the problem!&quot; RAM bump.<p>The exact culprit was never found - I spent a full week debugging it, and concluded that the problem had to do with someone on the library&#x2F;framework&#x2F;system stack of FastAPI&#x2F;aiohttp&#x2F;asyncio having expectations about someone else in the stack closing the socket after picking up the async context, but that never actually occurring. It was impenetrable to me due to the constant context switching between the libraries and frameworks, such that I could not keep the thread of who (above my application layer) should have been closing it.<p>My solution was to monkey patch the native python socket class and add a FastAPI middleware layer so that anytime an outgoing socket opened, I&#x27;d add it to a map of sockets by incoming request ID. Then when the incoming request concluded I&#x27;d lookup sockets in the map and close them manually.<p>It worked, the servers were stable, and the only follow-up request was to please delete the annoying &quot;Socket with file descriptor &lt;x&gt; manually closed&quot; message from the logs, because they were cluttering things up. And thus, another brick in the wall of my opinion that I do not prefer Python for reliable, high-performance HTTP servers.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106599&amp;goto=item%3Fid%3D45106189%2345106599" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107851"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45107851' href='vote?id=45107851&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=Scramblejams" class="hnuser">Scramblejams</a> <span class="age" title="2025-09-02T19:25:45 1756841145"><a href="item?id=45107851">53 minutes ago</a></span> <span id="unv_45107851"></span><span class="navs"> | <a href="#45106599" class="clicky" aria-hidden="true">parent</a> | <a href="#45108361" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107851" n="2" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">&gt; it is hard to maintain two APIs.<p>This point doesn&#x27;t get enough coverage. When I saw async coming into Python and C# (they happened to be the two ecosystems I was watching most closely at the time) I found it depressing just how much work was going into it that could have been productively expended elsewhere if they&#x27;d have gone with blocking calls to green threads instead.<p>To add insult to injury, when implementing async it seems inevitable that what&#x27;s created is a bizarro-world API that mostly-mirrors-but-often-not-quite the synchronous API. The differences usually don&#x27;t matter, until they do.<p>So not only does the project pay the cost of maintaining two APIs, the users forever pay the cost of dealing with the subtle differences between them that&#x27;ll probably never go away.<p>&gt; I do not prefer Python for reliable, high-performance HTTP servers<p>I don&#x27;t use it much anymore, but Twisted Matrix was (is?) great at this. Felt like a superpower to, in the oughties, easily saturate a network interface with useful work in Python.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107851&amp;goto=item%3Fid%3D45106189%2345107851" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45108268"><td><table border="0"><tr><td class="ind" indent="2"><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_45108268' href='vote?id=45108268&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=lormayna" class="hnuser">lormayna</a> <span class="age" title="2025-09-02T20:00:15 1756843215"><a href="item?id=45108268">18 minutes ago</a></span> <span id="unv_45108268"></span><span class="navs"> | <a href="#45106599" class="clicky" aria-hidden="true">root</a> | <a href="#45107851" class="clicky" aria-hidden="true">parent</a> | <a href="#45108361" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45108268" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">&gt; I don&#x27;t use it much anymore, but Twisted Matrix was (is?) great at this.<p>You must be an experienced developer to write maintenable code with Twisted, otherwise, when the codebase increase a little, it will quickly become a bunch of spaghetti code.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45108268&amp;goto=item%3Fid%3D45106189%2345108268" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45108361"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45108361' href='vote?id=45108361&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=lormayna" class="hnuser">lormayna</a> <span class="age" title="2025-09-02T20:10:35 1756843835"><a href="item?id=45108361">8 minutes ago</a></span> <span id="unv_45108361"></span><span class="navs"> | <a href="#45106599" class="clicky" aria-hidden="true">prev</a> | <a href="#45106669" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45108361" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">I always considered the ergonomic of async&#x2F;await not really ergonomical and hard to debug. I really like, indeed, the go approach: using goroutines, channels and waitgroups is powerful and easy.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45108361&amp;goto=item%3Fid%3D45106189%2345108361" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106669"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106669' href='vote?id=45106669&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=mjd" class="hnuser">mjd</a> <span class="age" title="2025-09-02T17:55:19 1756835719"><a href="item?id=45106669">2 hours ago</a></span> <span id="unv_45106669"></span><span class="navs"> | <a href="#45108361" class="clicky" aria-hidden="true">prev</a> | <a href="#45107080" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106669" n="2" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">I haven&#x27;t read the article yet, but I do have something to contribute: several years ago I was ay PyCon and saw a talk in which someone mentioned async.  I was interested and wanted to learn to use it.  But I found there was no documentation at all! The syntax was briefly described, but not the semantics.<p>I realized, years later, that the (non-)documentation was directed at people who were already familiar with the feature from Javascript.  But I hadn&#x27;t been familiar with it from Javascript and I didn&#x27;t even know that Javascript had had such a feature.<p>So that&#x27;s my tiny contribution to this discussion, one data point: Python&#x27;s async might have been one unit more popular if it had had any documentation, or even a crossreference to the Javascript documentation.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106669&amp;goto=item%3Fid%3D45106189%2345106669" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106735"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45106735' href='vote?id=45106735&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=notatoad" class="hnuser">notatoad</a> <span class="age" title="2025-09-02T18:00:03 1756836003"><a href="item?id=45106735">2 hours ago</a></span> <span id="unv_45106735"></span><span class="navs"> | <a href="#45106669" class="clicky" aria-hidden="true">parent</a> | <a href="#45107080" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106735" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">this was my initial experience with python async as well (which i now use heavily)<p>the documentation is directed at people who want coroutines and futures, and know what that means.  if you don&#x27;t know what coroutines and futures are, the python docs aren&#x27;t going to help you.  the documentation isn&#x27;t going to guide anybody into using the async features who aren&#x27;t already seeking them out.  and maybe that&#x27;s intentional, but it&#x27;s not going to grow adoption of the async features.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106735&amp;goto=item%3Fid%3D45106189%2345106735" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107080"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45107080' href='vote?id=45107080&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=rsyring" class="hnuser">rsyring</a> <span class="age" title="2025-09-02T18:26:42 1756837602"><a href="item?id=45107080">1 hour ago</a></span> <span id="unv_45107080"></span><span class="navs"> | <a href="#45106669" class="clicky" aria-hidden="true">prev</a> | <a href="#45106413" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107080" n="4" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Not too long ago, I read a comment on HN that suggested, due to Python&#x27;s support for free-threading, async in Python will no longer be needed and will lose out to free-threading due to it&#x27;s use of &quot;colored&quot; functions.  Which seems to align with where this author ends up:<p>&gt; Because parallelism in Python using threads has always been so limited, the APIs in the standard library are quite rudimentary. I think there is an opportunity to have a task-parallelism API in the standard library once free-threading is stabilized.<p>&gt; I think in 3.14 the sub-interpreter executor and free-threading features make more parallel and concurrency use cases practical and useful. For those, we don’t need async APIs and it alleviates much of the issues I highlighted in this post.<p>Armin recently put up a post that goes into those issue in more depth: <a href="https:&#x2F;&#x2F;lucumr.pocoo.org&#x2F;2025&#x2F;7&#x2F;26&#x2F;virtual-threads&#x2F;" rel="nofollow">https:&#x2F;&#x2F;lucumr.pocoo.org&#x2F;2025&#x2F;7&#x2F;26&#x2F;virtual-threads&#x2F;</a><p>Which lead me to a pre-PEP discussion regarding the possibility of Virtual Threads in Python, which was probably way more than I needed to know but found interesting: <a href="https:&#x2F;&#x2F;discuss.python.org&#x2F;t&#x2F;add-virtual-threads-to-python&#x2F;91403" rel="nofollow">https:&#x2F;&#x2F;discuss.python.org&#x2F;t&#x2F;add-virtual-threads-to-python&#x2F;9...</a></div><div class="reply"><p><font size="1"><u><a href="reply?id=45107080&amp;goto=item%3Fid%3D45106189%2345107080" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107511"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45107511' href='vote?id=45107511&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=ashf023" class="hnuser">ashf023</a> <span class="age" title="2025-09-02T18:58:20 1756839500"><a href="item?id=45107511">1 hour ago</a></span> <span id="unv_45107511"></span><span class="navs"> | <a href="#45107080" class="clicky" aria-hidden="true">parent</a> | <a href="#45108190" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107511" n="2" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Interesting that very few people in that thread seem to understand Go&#x27;s model, especially the author of this proposal. If you don&#x27;t allow preemption, you still have a sort of coloring because most non async functions aren&#x27;t safe to call in a virtual thread - they may block the executor. If you call C code, you need to swap out stacks and deal with blocking by potentially spawning more OS threads - that&#x27;s what CGo does. Maybe preemption is harder in Python, but that&#x27;s not clearly expressed - it&#x27;s just rejected as obviously unwanted.<p>Ultimately Python already has function coloring, and libraries are forced into that. This proposal seems poorly thought out, and also too little too late.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107511&amp;goto=item%3Fid%3D45106189%2345107511" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107717"><td><table border="0"><tr><td class="ind" indent="2"><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_45107717' href='vote?id=45107717&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=rsyring" class="hnuser">rsyring</a> <span class="age" title="2025-09-02T19:16:08 1756840568"><a href="item?id=45107717">1 hour ago</a></span> <span id="unv_45107717"></span><span class="navs"> | <a href="#45107080" class="clicky" aria-hidden="true">root</a> | <a href="#45107511" class="clicky" aria-hidden="true">parent</a> | <a href="#45108190" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107717" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">I can&#x27;t speak to the more technical aspects you bring up b&#x2F;c I&#x27;m not that well versed in the underlying implementations and tradeoffs.<p>&gt; and also too little too late.<p>I think it very likely that Python will still be around and popular 10 years from now.  Probably 20 years from now.  And maybe 30 years from now.  I think that&#x27;s plenty of time for a new and good idea that addresses significant pain points to take root and become a predominant paradigm in the ecosystem.<p>So I don&#x27;t agree that it&#x27;s too little too late.  But whether or not a Virtual Threads implementation can&#x2F;will be developed and be good enough to gain wide adoption, I just can&#x27;t speak to.  If it&#x27;s possible to create a better devx than async and get multi-core performance and usage, I&#x27;m all for the effort.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107717&amp;goto=item%3Fid%3D45106189%2345107717" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45108190"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45108190' href='vote?id=45108190&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=seunosewa" class="hnuser">seunosewa</a> <span class="age" title="2025-09-02T19:54:42 1756842882"><a href="item?id=45108190">24 minutes ago</a></span> <span id="unv_45108190"></span><span class="navs"> | <a href="#45107080" class="clicky" aria-hidden="true">parent</a> | <a href="#45107511" class="clicky" aria-hidden="true">prev</a> | <a href="#45106413" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45108190" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">async was the wrong solution to the right problem - improving general performance.
Free threading is the prize in an increasingly multi-core CPU world.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45108190&amp;goto=item%3Fid%3D45106189%2345108190" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106413"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106413' href='vote?id=45106413&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=MichaelRazum" class="hnuser">MichaelRazum</a> <span class="age" title="2025-09-02T17:38:51 1756834731"><a href="item?id=45106413">2 hours ago</a></span> <span id="unv_45106413"></span><span class="navs"> | <a href="#45107080" class="clicky" aria-hidden="true">prev</a> | <a href="#45106431" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106413" n="3" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">You can’t just plug and play it. As soon as you introduce async you need to have the runtime loop and so on. Basically the whole architecture needs to be redesigned</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106413&amp;goto=item%3Fid%3D45106189%2345106413" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106845"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45106845' href='vote?id=45106845&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=whilenot-dev" class="hnuser">whilenot-dev</a> <span class="age" title="2025-09-02T18:07:11 1756836431"><a href="item?id=45106845">2 hours ago</a></span> <span id="unv_45106845"></span><span class="navs"> | <a href="#45106413" class="clicky" aria-hidden="true">parent</a> | <a href="#45107320" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106845" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00"><i>asyncio</i> has been designed to be as &quot;plug and play&quot; as it gets. I&#x27;d discourage it, but one could create async loops wherever one would need them, one separate thread per loop, and adapt the code base in a more granular fashion. Blocking through the GIL will persist, though.<p>For any new app that is mostly IO constraint I&#x27;d still encourage the use of <i>asyncio</i> from the beginning.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106845&amp;goto=item%3Fid%3D45106189%2345106845" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107320"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45107320' href='vote?id=45107320&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=DrillShopper" class="hnuser">DrillShopper</a> <span class="age" title="2025-09-02T18:44:33 1756838673"><a href="item?id=45107320">1 hour ago</a></span> <span id="unv_45107320"></span><span class="navs"> | <a href="#45106413" class="clicky" aria-hidden="true">parent</a> | <a href="#45106845" class="clicky" aria-hidden="true">prev</a> | <a href="#45106431" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107320" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">It&#x27;s this - asyncio is a nightmare to add to and get working in a code base not specifically designed for it, and most people aren&#x27;t going to bother with that.  asyncio is not good enough at anything it does to make it worth it to me to design my entire program around it.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107320&amp;goto=item%3Fid%3D45106189%2345107320" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106431"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106431' href='vote?id=45106431&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=tschellenbach" class="hnuser">tschellenbach</a> <span class="age" title="2025-09-02T17:40:13 1756834813"><a href="item?id=45106431">2 hours ago</a></span> <span id="unv_45106431"></span><span class="navs"> | <a href="#45106413" class="clicky" aria-hidden="true">prev</a> | <a href="#45107491" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106431" n="2" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Yes, this!. Its a mess, some typing, some async. No standardization&#x2F; one way to do things. Literally goes against the original ZEN of python<p>&quot;There should be one-- and preferably only one --obvious way to do it : Aim for a single, clear solution to a problem. &quot;</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106431&amp;goto=item%3Fid%3D45106189%2345106431" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106673"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45106673' href='vote?id=45106673&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=aquariusDue" class="hnuser">aquariusDue</a> <span class="age" title="2025-09-02T17:55:29 1756835729"><a href="item?id=45106673">2 hours ago</a></span> <span id="unv_45106673"></span><span class="navs"> | <a href="#45106431" class="clicky" aria-hidden="true">parent</a> | <a href="#45107491" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106673" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Cue the zen of python apologists explaining how we just don&#x27;t get it and that with enough reframing it&#x27;ll click.<p>Snide remark aside, I actually like the Zen of Python as programming language folklore but in 2025 AD it&#x27;s kinda crazy to pretend that Python actually adheres to those tenets or whatever you wish to call them, and I&#x27;d go as far as to claim that it does a disservice to a language flexible enough for a lot of use cases. There&#x27;s even someone on YouTube developing a VR game with Python.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106673&amp;goto=item%3Fid%3D45106189%2345106673" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107491"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45107491' href='vote?id=45107491&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=languagehacker" class="hnuser">languagehacker</a> <span class="age" title="2025-09-02T18:57:01 1756839421"><a href="item?id=45107491">1 hour ago</a></span> <span id="unv_45107491"></span><span class="navs"> | <a href="#45106431" class="clicky" aria-hidden="true">prev</a> | <a href="#45106312" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107491" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Wow, didn&#x27;t even see much about how miserable using the sync_to_async and async_to_sync transformers are.<p>In general, the architectures developed because of the GIL, like Celery and gunicorn and stuff like that, handles most of the problems we run into that async&#x2F;await solves with slightly better horizontal scaling IMO. The problem with a lot of async code is that it tends not to think beyond the single machine that&#x27;s running it, and by the time you do, you need to rearchitect things to scale better horizontally anyway.<p>For most Python applications, especially with web development, just start with something like Celery and you&#x27;re probably fine.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107491&amp;goto=item%3Fid%3D45106189%2345107491" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106312"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106312' href='vote?id=45106312&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=kamikaz1k" class="hnuser">kamikaz1k</a> <span class="age" title="2025-09-02T17:32:05 1756834325"><a href="item?id=45106312">2 hours ago</a></span> <span id="unv_45106312"></span><span class="navs"> | <a href="#45107491" class="clicky" aria-hidden="true">prev</a> | <a href="#45106819" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106312" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">async python is awful. to me it is a by default avoid. and when you can&#x27;t avoid, use only where it provides outsized benefit.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106312&amp;goto=item%3Fid%3D45106189%2345106312" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106819"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106819' href='vote?id=45106819&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=rdtsc" class="hnuser">rdtsc</a> <span class="age" title="2025-09-02T18:04:54 1756836294"><a href="item?id=45106819">2 hours ago</a></span> <span id="unv_45106819"></span><span class="navs"> | <a href="#45106312" class="clicky" aria-hidden="true">prev</a> | <a href="#45106376" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106819" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">I never liked async in Python. I feel like it&#x27;s a bad design pattern, a lot of borrowed from Twisted at the time. I always liked gevent&#x2F;eventlet based approach and will likely always stick to using that. At the time Go and Elixir&#x2F;Erlang had green threads (lightweight procs &#x2F; goroutines) and in general I think that makes for a cleaner code base.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106819&amp;goto=item%3Fid%3D45106189%2345106819" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106376"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106376' href='vote?id=45106376&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=giancarlostoro" class="hnuser">giancarlostoro</a> <span class="age" title="2025-09-02T17:36:32 1756834592"><a href="item?id=45106376">2 hours ago</a></span> <span id="unv_45106376"></span><span class="navs"> | <a href="#45106819" class="clicky" aria-hidden="true">prev</a> | <a href="#45106744" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106376" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">I think part of it is historical. WSGI has been around a while before async became relevant. The industry now has had ASGI for a while, but if your WSGI deployed web application doesn&#x27;t need to squeeze out all the juice it can with async, you might not be phased by not using it or bothered at all.<p>Reminds me of how long it took some to go from Python 2 to Python 3.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106376&amp;goto=item%3Fid%3D45106189%2345106376" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106744"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106744' href='vote?id=45106744&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=KaiserPro" class="hnuser">KaiserPro</a> <span class="age" title="2025-09-02T18:00:53 1756836053"><a href="item?id=45106744">2 hours ago</a></span> <span id="unv_45106744"></span><span class="navs"> | <a href="#45106376" class="clicky" aria-hidden="true">prev</a> | <a href="#45106399" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106744" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">the two issues I have with async is are:<p>1) its infectious. You need to wrap everything in async or nothing.<p>2) it has non-obvious program flow.<p>Even though it is faster in a lot of cases (I had a benchmark off for a web&#x2F;socket server for multi-threaded vs async with a colleague, and the async was faster.) for me it is a shit to force into a class.<p>The thing I like about threads is that the flow of data is there and laid out neatly _per thread_, where as to me, async feels like surprise goto. async feels like it accepts a request, and then will at some point at the future either trigger more async, or crap out mixing loads of state from different requests all over the place.<p>To me it feels like a knotted wool bundle, where as threaded&#x2F;multi-process feels like a freshly wound bobbin.<p>Now, this is all viiiiiibes man, so its subjective.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106744&amp;goto=item%3Fid%3D45106189%2345106744" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106399"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106399' href='vote?id=45106399&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=dapperdrake" class="hnuser">dapperdrake</a> <span class="age" title="2025-09-02T17:37:55 1756834675"><a href="item?id=45106399">2 hours ago</a></span> <span id="unv_45106399"></span><span class="navs"> | <a href="#45106744" class="clicky" aria-hidden="true">prev</a> | <a href="#45107133" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106399" n="2" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Python&#x27;s async is very difficult to use and debug.  It seems to get stuck randomly, read like race conditions. And Python cannot work around this nicely with their lambdas only permitting a single expression in their body.<p>Not worth the trouble.  Shell pipelines are way easier to use.  Or simply waiting —no pun intended— for the synchronous to finish.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106399&amp;goto=item%3Fid%3D45106189%2345106399" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106678"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45106678' href='vote?id=45106678&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=mixmastamyk" class="hnuser">mixmastamyk</a> <span class="age" title="2025-09-02T17:55:35 1756835735"><a href="item?id=45106678">2 hours ago</a></span> <span id="unv_45106678"></span><span class="navs"> | <a href="#45106399" class="clicky" aria-hidden="true">parent</a> | <a href="#45107133" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106678" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">&gt; lambdas only permitting a single expression<p>Use a tuple, maybe walrus, and return the last item[-1].</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106678&amp;goto=item%3Fid%3D45106189%2345106678" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107133"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45107133' href='vote?id=45107133&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=fulafel" class="hnuser">fulafel</a> <span class="age" title="2025-09-02T18:30:17 1756837817"><a href="item?id=45107133">1 hour ago</a></span> <span id="unv_45107133"></span><span class="navs"> | <a href="#45106399" class="clicky" aria-hidden="true">prev</a> | <a href="#45107609" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107133" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">I think this is for the best. We don&#x27;t want to end up like Rust. The complexity tradeoff suits Python&#x27;s sweet spot even less (much less).</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107133&amp;goto=item%3Fid%3D45106189%2345107133" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107609"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45107609' href='vote?id=45107609&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=the__alchemist" class="hnuser">the__alchemist</a> <span class="age" title="2025-09-02T19:05:41 1756839941"><a href="item?id=45107609">1 hour ago</a></span> <span id="unv_45107609"></span><span class="navs"> | <a href="#45107133" class="clicky" aria-hidden="true">prev</a> | <a href="#45107370" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107609" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">The barrier it places in Rust&#x27;s lib ecosystem is unpleasant; I&#x27;m glad it hasn&#x27;t taken off in Python. I have written too many rust libs because the existing ones forced your code  to be Async.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107609&amp;goto=item%3Fid%3D45106189%2345107609" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107370"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45107370' href='vote?id=45107370&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=nromiun" class="hnuser">nromiun</a> <span class="age" title="2025-09-02T18:48:52 1756838932"><a href="item?id=45107370">1 hour ago</a></span> <span id="unv_45107370"></span><span class="navs"> | <a href="#45107609" class="clicky" aria-hidden="true">prev</a> | <a href="#45106601" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107370" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">It was supposed to bring massive concurrency to Python. But as with any async implantation in any language it is too easy to deadlock the entire system. Did you forgot to sprinkle enough `await`? Your code is blocked somewhere, good luck hunting for it.<p>In contrast preemptive green threads are too easy. Be it IO or CPU load all threads will get their slice of CPU time. Nothing is blocked so you can debug your logic errors instead of deadlocks everywhere.<p>Async works in JS so well because the entire language is designed for it, instead of async being just bolted on. You can&#x27;t even run plain `sleep` to block, you need setTimeout.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107370&amp;goto=item%3Fid%3D45106189%2345107370" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106601"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106601' href='vote?id=45106601&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=Areading314" class="hnuser">Areading314</a> <span class="age" title="2025-09-02T17:50:40 1756835440"><a href="item?id=45106601">2 hours ago</a></span> <span id="unv_45106601"></span><span class="navs"> | <a href="#45107370" class="clicky" aria-hidden="true">prev</a> | <a href="#45106686" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106601" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">I think explicit management of the event loop and the associated potential for grievous bugs has a lot to do with it.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106601&amp;goto=item%3Fid%3D45106189%2345106601" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106686"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106686' href='vote?id=45106686&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=ketchupdebugger" class="hnuser">ketchupdebugger</a> <span class="age" title="2025-09-02T17:56:24 1756835784"><a href="item?id=45106686">2 hours ago</a></span> <span id="unv_45106686"></span><span class="navs"> | <a href="#45106601" class="clicky" aria-hidden="true">prev</a> | <a href="#45106756" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106686" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">The two api issue basically means async is not backwards compatible. You can&#x27;t just squeeze some async into an existing code base, You&#x27;d need new functions, libraries etc. You&#x27;d basically need to rewrite the entire codebase in async to see an ounce of perf improvements.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106686&amp;goto=item%3Fid%3D45106189%2345106686" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106756"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106756' href='vote?id=45106756&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=bmandale" class="hnuser">bmandale</a> <span class="age" title="2025-09-02T18:01:32 1756836092"><a href="item?id=45106756">2 hours ago</a></span> <span id="unv_45106756"></span><span class="navs"> | <a href="#45106686" class="clicky" aria-hidden="true">prev</a> | <a href="#45107360" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106756" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">I don&#x27;t like the idea of launching a whole thread for every concurrent task I want to do. But holy hell is it so much easier than figuring out how tf async works. If I wanted something super performant I wouldn&#x27;t be using python in the first place.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106756&amp;goto=item%3Fid%3D45106189%2345106756" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107360"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45107360' href='vote?id=45107360&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=alanfranz" class="hnuser">alanfranz</a> <span class="age" title="2025-09-02T18:48:02 1756838882"><a href="item?id=45107360">1 hour ago</a></span> <span id="unv_45107360"></span><span class="navs"> | <a href="#45106756" class="clicky" aria-hidden="true">prev</a> | <a href="#45107438" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107360" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Much more than 10y. Twisted existed since the 90s. I didn’t read the whole article but I find is strange that it’s not mentioned, ever.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107360&amp;goto=item%3Fid%3D45106189%2345107360" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107438"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45107438' href='vote?id=45107438&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=Meneth" class="hnuser">Meneth</a> <span class="age" title="2025-09-02T18:54:14 1756839254"><a href="item?id=45107438">1 hour ago</a></span> <span id="unv_45107438"></span><span class="navs"> | <a href="#45107360" class="clicky" aria-hidden="true">prev</a> | <a href="#45106670" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107438" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">KeyboardInterrupt (Ctrl+C) has been a problem wherever I&#x27;ve used python async. It should just work out of the box.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107438&amp;goto=item%3Fid%3D45106189%2345107438" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106670"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106670' href='vote?id=45106670&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=dekhn" class="hnuser">dekhn</a> <span class="age" title="2025-09-02T17:55:21 1756835721"><a href="item?id=45106670">2 hours ago</a></span> <span id="unv_45106670"></span><span class="navs"> | <a href="#45107438" class="clicky" aria-hidden="true">prev</a> | <a href="#45107482" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106670" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">It added intrusive- codebase-wide- functionality that more or less could have been done with other (thread-based) approaches.<p>AWSCLI was broken for over a year- we had to do a ton of work to deal with the various packaging issues.<p>Don&#x27;t break userspace.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106670&amp;goto=item%3Fid%3D45106189%2345106670" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107482"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45107482' href='vote?id=45107482&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=JodieBenitez" class="hnuser">JodieBenitez</a> <span class="age" title="2025-09-02T18:56:25 1756839385"><a href="item?id=45107482">1 hour ago</a></span> <span id="unv_45107482"></span><span class="navs"> | <a href="#45106670" class="clicky" aria-hidden="true">prev</a> | <a href="#45106417" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107482" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Why isn&#x27;t it more popular ? Well, replacing libs and functions with async versions is not fun.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107482&amp;goto=item%3Fid%3D45106189%2345107482" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106417"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106417' href='vote?id=45106417&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=tripletpeaks" class="hnuser">tripletpeaks</a> <span class="age" title="2025-09-02T17:39:14 1756834754"><a href="item?id=45106417">2 hours ago</a></span> <span id="unv_45106417"></span><span class="navs"> | <a href="#45107482" class="clicky" aria-hidden="true">prev</a> | <a href="#45106473" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106417" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">It’s probably related to the fact that when they added “await” to JavaScript, it seemed to become the most popular keyword in the language overnight, just comical amounts of it in the average new JavaScript file in the wild.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106417&amp;goto=item%3Fid%3D45106189%2345106417" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106473"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106473' href='vote?id=45106473&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=dec0dedab0de" class="hnuser">dec0dedab0de</a> <span class="age" title="2025-09-02T17:42:22 1756834942"><a href="item?id=45106473">2 hours ago</a></span> <span id="unv_45106473"></span><span class="navs"> | <a href="#45106417" class="clicky" aria-hidden="true">prev</a> | <a href="#45106384" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106473" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">It&#x27;s had async way longer than 10 years.  multi-threading&#x2F;processing, celery, twisted, others I can&#x27;t remember.<p>Asyncio means learning different syntax that buys me nothing over the existing tools.  Why would I bother?</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106473&amp;goto=item%3Fid%3D45106189%2345106473" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106384"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106384' href='vote?id=45106384&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=baq" class="hnuser">baq</a> <span class="age" title="2025-09-02T17:36:58 1756834618"><a href="item?id=45106384">2 hours ago</a></span> <span id="unv_45106384"></span><span class="navs"> | <a href="#45106473" class="clicky" aria-hidden="true">prev</a> | <a href="#45106428" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106384" n="3" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">async, parallelism, concurrency, why not all three? JS, the canonical async (at least today) language, has had neither parallelism nor concurrency primitives for a good decade or so after its inception.<p>I personally blame low async adoption in Python on 1) general reduction in its popularity vs Typescript+node, which is driven by the desire to have a single stack on the frontend and backend, not by bad or good async implementations in Python (see also: Rails, once the poster child of the Web, now nearly forgotten) 2) lack of good async stdlib. parallelism and concurrency are distant thirds.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106384&amp;goto=item%3Fid%3D45106189%2345106384" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106668"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45106668' href='vote?id=45106668&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=dragonwriter" class="hnuser">dragonwriter</a> <span class="age" title="2025-09-02T17:55:18 1756835718"><a href="item?id=45106668">2 hours ago</a></span> <span id="unv_45106668"></span><span class="navs"> | <a href="#45106384" class="clicky" aria-hidden="true">parent</a> | <a href="#45106428" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106668" n="2" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">&gt; async, parallelism, concurrency, why not all three?<p>async <i>is</i> a concurrency mechanism.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106668&amp;goto=item%3Fid%3D45106189%2345106668" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106722"><td><table border="0"><tr><td class="ind" indent="2"><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_45106722' href='vote?id=45106722&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=JackSlateur" class="hnuser">JackSlateur</a> <span class="age" title="2025-09-02T17:59:19 1756835959"><a href="item?id=45106722">2 hours ago</a></span> <span id="unv_45106722"></span><span class="navs"> | <a href="#45106384" class="clicky" aria-hidden="true">root</a> | <a href="#45106668" class="clicky" aria-hidden="true">parent</a> | <a href="#45106428" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106722" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">async enables a concurrency potential, nothing more<p>That is, if you use external stuff and can delegate work to them, then async is concurrent (async io for instance)<p>But if you do not, then async is regular code with extra steps</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106722&amp;goto=item%3Fid%3D45106189%2345106722" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106428"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106428' href='vote?id=45106428&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=taude" class="hnuser">taude</a> <span class="age" title="2025-09-02T17:39:59 1756834799"><a href="item?id=45106428">2 hours ago</a></span> <span id="unv_45106428"></span><span class="navs"> | <a href="#45106384" class="clicky" aria-hidden="true">prev</a> | <a href="#45106338" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106428" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Use an appropriate language and runtime for the right tool&#x2F;workload. There&#x27;s better languages and runtimes to use that have better native concurrency built in.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106428&amp;goto=item%3Fid%3D45106189%2345106428" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106338"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106338' href='vote?id=45106338&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=fullstop" class="hnuser">fullstop</a> <span class="age" title="2025-09-02T17:33:32 1756834412"><a href="item?id=45106338">2 hours ago</a></span> <span id="unv_45106338"></span><span class="navs"> | <a href="#45106428" class="clicky" aria-hidden="true">prev</a> | <a href="#45106550" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106338" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Exceptions are difficult to deal with.  Also, while they&#x27;ve had async for 10 years it has changed quite a bit from the initial incarnation.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106338&amp;goto=item%3Fid%3D45106189%2345106338" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106550"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106550' href='vote?id=45106550&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=rcarmo" class="hnuser">rcarmo</a> <span class="age" title="2025-09-02T17:47:02 1756835222"><a href="item?id=45106550">2 hours ago</a></span> <span id="unv_45106550"></span><span class="navs"> | <a href="#45106338" class="clicky" aria-hidden="true">prev</a> | <a href="#45106541" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106550" n="2" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">I&#x27;ve had no real issues with async, although I primarily use libraries like aiohttp and aiosqlite and even write my own helpers (<a href="https:&#x2F;&#x2F;github.com&#x2F;rcarmo&#x2F;aioazstorage" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;rcarmo&#x2F;aioazstorage</a> is a good example).<p>The vast majority of the Python code I wrote in the last 5-6 years uses asyncio, and most of the complaints I see about it (hard to debug, getting stuck, etc.) were -- at least in my case -- because there were some other libraries doing unexpected things (like threading or hard sleep()).<p>Coming from a networking background, the way I can deal with I&#x2F;O has been massively simplified, and coroutines are quite useful.<p>But as always in HN, I&#x27;m prepared for that to be an unpopular opinion.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106550&amp;goto=item%3Fid%3D45106189%2345106550" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106750"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45106750' href='vote?id=45106750&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=JackSlateur" class="hnuser">JackSlateur</a> <span class="age" title="2025-09-02T18:01:05 1756836065"><a href="item?id=45106750">2 hours ago</a></span> <span id="unv_45106750"></span><span class="navs"> | <a href="#45106550" class="clicky" aria-hidden="true">parent</a> | <a href="#45106541" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106750" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">I share your experience<p>asyncio is easier than threads or multiprocess: less locking issue, easier to run small chunks of code in &#x2F;&#x2F; (easier to await something than to create a thread that run some method)</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106750&amp;goto=item%3Fid%3D45106189%2345106750" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106541"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106541' href='vote?id=45106541&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=silverwind" class="hnuser">silverwind</a> <span class="age" title="2025-09-02T17:46:06 1756835166"><a href="item?id=45106541">2 hours ago</a></span> <span id="unv_45106541"></span><span class="navs"> | <a href="#45106550" class="clicky" aria-hidden="true">prev</a> | <a href="#45107724" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106541" n="2" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">I think Python needs a good `fetch`-like async http client in the stdlib.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106541&amp;goto=item%3Fid%3D45106189%2345106541" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106560"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45106560' href='vote?id=45106560&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=rcarmo" class="hnuser">rcarmo</a> <span class="age" title="2025-09-02T17:47:54 1756835274"><a href="item?id=45106560">2 hours ago</a></span> <span id="unv_45106560"></span><span class="navs"> | <a href="#45106541" class="clicky" aria-hidden="true">parent</a> | <a href="#45107724" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106560" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">I personally recommend aiohttp. Setting up a ClientSession and letting it do its thing is quite nice.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106560&amp;goto=item%3Fid%3D45106189%2345106560" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107724"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45107724' href='vote?id=45107724&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=omnicognate" class="hnuser">omnicognate</a> <span class="age" title="2025-09-02T19:16:41 1756840601"><a href="item?id=45107724">1 hour ago</a></span> <span id="unv_45107724"></span><span class="navs"> | <a href="#45106541" class="clicky" aria-hidden="true">prev</a> | <a href="#45107407" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107724" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c5A">For a counter-opinion that isn&#x27;t getting stated much here, I think:<p>* Asyncio is pretty good, and is usually the best choice for non-blocking I&#x2F;O in python these days.<p>* Asyncio doesn&#x27;t add multi-core scaling to python. It&#x27;s not a replacement for threads and doesn&#x27;t lift the GIL-imposed scaling limitations. If these things are what you&#x27;re after from asyncio you&#x27;ll be disappointed, but they&#x27;re not what it&#x27;s trying to add and not adding them doesn&#x27;t make it a failure.<p>* &quot;Coloured functions&quot; is a nonsense argument and that article made the whole world  slightly more dumb.<p>* The GIL is part of the reason for python&#x27;s success. I hope nogil either somehow manages to succeed without compromising the benefits the GIL has brought (I&#x27;ll be amazed if that happens) or fails entirely. Languages are tools and every tool in your toolbox doesn&#x27;t have to eventually turn into a drill. If your use case requires in-process parallelisation of interpreted CPU-bound workloads across multiple cores, python is just the wrong thing to use.<p>* It is indeed extremely annoying that we don&#x27;t have async file access yet. I hope we get it soon.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107724&amp;goto=item%3Fid%3D45106189%2345107724" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107407"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45107407' href='vote?id=45107407&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=th0ma5" class="hnuser">th0ma5</a> <span class="age" title="2025-09-02T18:52:18 1756839138"><a href="item?id=45107407">1 hour ago</a></span> <span id="unv_45107407"></span><span class="navs"> | <a href="#45107724" class="clicky" aria-hidden="true">prev</a> | <a href="#45106486" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107407" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">I adopted just the Clojure style of thinking in terms of immutable copies and it seems easier to move between synch and asynch conceptually as needed, although Clojure has some asynch parallelism automatically due to this paradigm as well.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107407&amp;goto=item%3Fid%3D45106189%2345107407" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106486"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106486' href='vote?id=45106486&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=northisup" class="hnuser">northisup</a> <span class="age" title="2025-09-02T17:43:18 1756834998"><a href="item?id=45106486">2 hours ago</a></span> <span id="unv_45106486"></span><span class="navs"> | <a href="#45107407" class="clicky" aria-hidden="true">prev</a> | <a href="#45107590" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106486" n="2" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">because two colors of functions suuuuuuuuuuks to deal with</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106486&amp;goto=item%3Fid%3D45106189%2345106486" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106613"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45106613' href='vote?id=45106613&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=Analemma_" class="hnuser">Analemma_</a> <span class="age" title="2025-09-02T17:51:35 1756835495"><a href="item?id=45106613">2 hours ago</a></span> <span id="unv_45106613"></span><span class="navs"> | <a href="#45106486" class="clicky" aria-hidden="true">parent</a> | <a href="#45107590" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106613" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Doesn&#x27;t really explain why async&#x2F;await are hugely popular in C#, JavaScript, etc. but didn&#x27;t take off in Python.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106613&amp;goto=item%3Fid%3D45106189%2345106613" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107590"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45107590' href='vote?id=45107590&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=andrewstuart" class="hnuser">andrewstuart</a> <span class="age" title="2025-09-02T19:04:45 1756839885"><a href="item?id=45107590">1 hour ago</a></span> <span id="unv_45107590"></span><span class="navs"> | <a href="#45106486" class="clicky" aria-hidden="true">prev</a> | <a href="#45106571" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107590" n="2" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Not popular?<p>I use async all the time.<p>The evidence this post provides is that flask and Django aren’t all in on async.<p>That’s meaningless.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107590&amp;goto=item%3Fid%3D45106189%2345107590" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45108360"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45108360' href='vote?id=45108360&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=kamikaz1k" class="hnuser">kamikaz1k</a> <span class="age" title="2025-09-02T20:10:27 1756843827"><a href="item?id=45108360">8 minutes ago</a></span> <span id="unv_45108360"></span><span class="navs"> | <a href="#45107590" class="clicky" aria-hidden="true">parent</a> | <a href="#45106571" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45108360" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">if you&#x27;re going to lobby that criticism, you should atleast offer an alternative definition of popular...unless you&#x27;re saying your usage of a tool defines its popularity</div><div class="reply"><p><font size="1"><u><a href="reply?id=45108360&amp;goto=item%3Fid%3D45106189%2345108360" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106571"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106571' href='vote?id=45106571&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=whalesalad" class="hnuser">whalesalad</a> <span class="age" title="2025-09-02T17:48:38 1756835318"><a href="item?id=45106571">2 hours ago</a></span> <span id="unv_45106571"></span><span class="navs"> | <a href="#45107590" class="clicky" aria-hidden="true">prev</a> | <a href="#45106446" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106571" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">I adopted gevent&#x2F;greenlets pretty early on and it has always felt better than asyncio, monkey-patching aside.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106571&amp;goto=item%3Fid%3D45106189%2345106571" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106446"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106446' href='vote?id=45106446&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=adfm" class="hnuser">adfm</a> <span class="age" title="2025-09-02T17:40:45 1756834845"><a href="item?id=45106446">2 hours ago</a></span> <span id="unv_45106446"></span><span class="navs"> | <a href="#45106571" class="clicky" aria-hidden="true">prev</a> | <a href="#45106435" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106446" n="2" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Twisted?</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106446&amp;goto=item%3Fid%3D45106189%2345106446" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106666"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45106666' href='vote?id=45106666&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=lstodd" class="hnuser">lstodd</a> <span class="age" title="2025-09-02T17:55:14 1756835714"><a href="item?id=45106666">2 hours ago</a></span> <span id="unv_45106666"></span><span class="navs"> | <a href="#45106446" class="clicky" aria-hidden="true">parent</a> | <a href="#45106435" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106666" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">And Tornado. Please don&#x27;t remind me of those horrors.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106666&amp;goto=item%3Fid%3D45106189%2345106666" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106435"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106435' href='vote?id=45106435&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=lysace" class="hnuser">lysace</a> <span class="age" title="2025-09-02T17:40:22 1756834822"><a href="item?id=45106435">2 hours ago</a></span> <span id="unv_45106435"></span><span class="navs"> | <a href="#45106446" class="clicky" aria-hidden="true">prev</a> | <a href="#45108327" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106435" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Because it takes a a lot of reading&#x2F;studying&#x2F;experimentation to get things right.<p>I&#x27;m personally halfway through that journey (having spent like 4h reading docs&#x2F;learning, on top of the development). I <i>suspect</i> it could have been designed in such a way so that it&#x27;s less trivially easy to mess up.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106435&amp;goto=item%3Fid%3D45106189%2345106435" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45108327"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45108327' href='vote?id=45108327&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=TZubiri" class="hnuser">TZubiri</a> <span class="age" title="2025-09-02T20:06:51 1756843611"><a href="item?id=45108327">12 minutes ago</a></span> <span id="unv_45108327"></span><span class="navs"> | <a href="#45106435" class="clicky" aria-hidden="true">prev</a> | <a href="#45106651" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45108327" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Because I don&#x27;t need it.<p>When I need to do concurrent stuff I either use fork to multiprocess or use the threading library, no import necessary, couple of lines of code, no need to make specialized code with await keywords and stuff.<p>This line made me question myself though:<p>&quot;Then Flask is and probably always will be synchronous (Quart is an async alternative with similar APIs).&quot;<p>I use flask, and I literally spent the last hour questioning whether I was an idiot and needed to dm my previous clients asking them to fix my code. I&#x27;m wondering how my apps passed stress tests of thousands of concurrent users, maybe I did the tests wrong?<p>Chatgpt says<p>&quot;s flask asynchronous?
ChatGPT said:<p>Flask itself is not asynchronous. It is a WSGI-based framework, which means it is synchronous by design — it handles one request at a time per worker. Each request is processed sequentially, and concurrency is typically achieved by running multiple worker processes&quot;<p>Oh shit, I didn&#x27;t use gunicorn, I just run the python script raw. I&#x27;m an idiot. Let&#x27;s write a test server that sleeps for 1 second before responding to a request:<p>&quot;
import flask
import requests
import time
app = flask.Flask(&quot;test&quot;)<p>@app.route(&quot;&#x2F;&quot;)
def hi():
        time.sleep(1)
        #requests.get(&quot;<a href="https:&#x2F;&#x2F;google.com" rel="nofollow">https:&#x2F;&#x2F;google.com</a>&quot;)
        return &quot;Hello, World!&quot;<p>app.run(&quot;0.0.0.0&quot;,8088)
&quot;<p>This should block for like 25ms, if 50 concurrent users ask for this resource, there will be an average 500ms of extra latency!<p>And a Test client that does 50 calls at once, will it take 50 seconds?:<p>&quot;import threading
import requests<p>URL = &quot;<a href="http:&#x2F;&#x2F;127.0.0.1:8088&#x2F;" rel="nofollow">http:&#x2F;&#x2F;127.0.0.1:8088&#x2F;</a>&quot;<p>def make_request(i):
        try:
                print(&quot;req&quot;)
                response = requests.get(URL)
                print(&quot;res&quot;)
        except:
                print(&quot;fail&quot;)<p>threads = []<p>for i in range(5):
        t = threading.Thread(target=make_request, args=(i,))
        threads.append(t)
        t.start()<p>for t in threads:
        t.join()<p>print(&quot;All requests completed&quot;)<p>&quot;<p>Then we run with time binary in linux:<p>&gt;time python3 client.py<p>All requests completed<p>real    0m1.216s
user    0m0.203s
sys     0m0.039s<p>Ok, turn off the alarms, Flask is fine.<p>I&#x27;m not sure what&#x27;s going on with async, but the only experience I had with it was a junior dev that came from writing horrible node apps with react and nest (his frontend connected to a supabase db directly with credentials exposed, even if there was a node backend).<p>He wanted to pivot to python because that&#x27;s what I used and I had good results, so he installed Quartz instead of Flask, and he was writing Node like code in python, and it was of course a mess.<p>Not saying that it&#x27;s always going to be a mess, but you are better off learning the native way of a language instead of trying to shoehorn other abstractions and claiming that the way it is done in python is inefficient, it&#x27;s one of the most popular languages in the world, these are massively used libraries, it&#x27;s unlikely that &quot;something is terribly wrong&quot;. It&#x27;s more of a meme that python is slow.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45108327&amp;goto=item%3Fid%3D45106189%2345108327" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106651"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106651' href='vote?id=45106651&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=lstodd" class="hnuser">lstodd</a> <span class="age" title="2025-09-02T17:54:18 1756835658"><a href="item?id=45106651">2 hours ago</a></span> <span id="unv_45106651"></span><span class="navs"> | <a href="#45108327" class="clicky" aria-hidden="true">prev</a> | <a href="#45106532" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106651" n="5" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">idk stackless dates back to 2005 at least, most likely earlier.<p>greenlet which is sort of minimal stackless .. before 2008<p>pycoev which is on one hand greenlets without memmove()s, on the other hand sort of io-scheduled m:n threading I wrote myself in 2009.<p>so, at least idk, 20 years?<p>It was first needed. Then 10 years passed, people got around to pushing it through the process aaand by the time it was done it was already not needed. so it all stalled. Same with Rust.<p>Nowadays server-side async is handled very differently. And client-side is dominated by that abomination called JS.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106651&amp;goto=item%3Fid%3D45106189%2345106651" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107815"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45107815' href='vote?id=45107815&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=fulafel" class="hnuser">fulafel</a> <span class="age" title="2025-09-02T19:23:45 1756841025"><a href="item?id=45107815">55 minutes ago</a></span> <span id="unv_45107815"></span><span class="navs"> | <a href="#45106651" class="clicky" aria-hidden="true">parent</a> | <a href="#45107292" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107815" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Also back then multicore wasn&#x27;t as prevalent, it made sense to multiplex a zillion things onto one CPU process. Whereas now servers have hundreds of cores &#x2F; SMT vCPUs [1] and running a lot of processes makes much more sense.<p>[1] <a href="https:&#x2F;&#x2F;www.tomshardware.com&#x2F;pc-components&#x2F;cpus&#x2F;amd-announces-3nm-epyc-turin-launching-with-192-cores-and-384-threads-in-second-half-of-2024-54x-faster-than-intel-xeon-in-ai-workload" rel="nofollow">https:&#x2F;&#x2F;www.tomshardware.com&#x2F;pc-components&#x2F;cpus&#x2F;amd-announce...</a></div><div class="reply"><p><font size="1"><u><a href="reply?id=45107815&amp;goto=item%3Fid%3D45106189%2345107815" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107292"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45107292' href='vote?id=45107292&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=toolslive" class="hnuser">toolslive</a> <span class="age" title="2025-09-02T18:42:22 1756838542"><a href="item?id=45107292">1 hour ago</a></span> <span id="unv_45107292"></span><span class="navs"> | <a href="#45106651" class="clicky" aria-hidden="true">parent</a> | <a href="#45107815" class="clicky" aria-hidden="true">prev</a> | <a href="#45106532" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107292" n="3" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">I never understood why stackless wasn&#x27;t more popular. It was rather nice, clean and performant (well, it&#x27;s still python but it provide(d) proper concurrency)</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107292&amp;goto=item%3Fid%3D45106189%2345107292" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107983"><td><table border="0"><tr><td class="ind" indent="2"><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_45107983' href='vote?id=45107983&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=lstodd" class="hnuser">lstodd</a> <span class="age" title="2025-09-02T19:36:40 1756841800"><a href="item?id=45107983">42 minutes ago</a></span> <span id="unv_45107983"></span><span class="navs"> | <a href="#45106651" class="clicky" aria-hidden="true">root</a> | <a href="#45107292" class="clicky" aria-hidden="true">parent</a> | <a href="#45106532" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107983" n="2" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">It was memmove() on each task switch. So you could forget about d-cache.
And that killed performance on anything but benchmarks.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107983&amp;goto=item%3Fid%3D45106189%2345107983" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45108287"><td><table border="0"><tr><td class="ind" indent="3"><img src="s.gif" height="1" width="120"></td><td valign="top" class="votelinks"><center><a id='up_45108287' href='vote?id=45108287&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=ack_complete" class="hnuser">ack_complete</a> <span class="age" title="2025-09-02T20:02:08 1756843328"><a href="item?id=45108287">16 minutes ago</a></span> <span id="unv_45108287"></span><span class="navs"> | <a href="#45106651" class="clicky" aria-hidden="true">root</a> | <a href="#45107983" class="clicky" aria-hidden="true">parent</a> | <a href="#45106532" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45108287" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Also caused subtle bugs. I once had to debug a crash in C++ code that turned out to be due to Stackless Python corrupting stack state on Windows. OutputDebugString() would intermittently crash because Stackless had temporarily copied out part of the stack and corrupted the thread&#x27;s structured exception handling chain. This wasn&#x27;t obvious because this occurred in a very deep call stack with Stackless much higher up, and it only made sense if you knew that OutputDebugString() is implemented internally by throwing a continuable exception.<p>The more significant problem was that Stackless was a separate distribution. Every time CPython updated, there would be a delay until Stackless updated, and tooling like Python IDEs varied in whether they supported Stackless.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45108287&amp;goto=item%3Fid%3D45106189%2345108287" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106532"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106532' href='vote?id=45106532&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=OutOfHere" class="hnuser">OutOfHere</a> <span class="age" title="2025-09-02T17:45:36 1756835136"><a href="item?id=45106532">2 hours ago</a></span> <span id="unv_45106532"></span><span class="navs"> | <a href="#45106651" class="clicky" aria-hidden="true">prev</a> | <a href="#45106877" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106532" n="3" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">With the newest Python, I can use no-gil, so my threads automatically use multiple cores. With asyncio, even under no-gil, unless I use a base layer that offers parallelism, I am stuck to a single core by default, which doesn&#x27;t make any sense in a multicore world. In contrast, with Rust&#x27;s async, there is no such limitation.<p>The traditional argument against the above assertion has been that asyncio is good for I&#x2F;O work, not for CPU work, but this constraint is not realistic because CPU usage is guaranteed to creep in.<p>In summary, I can use threading&#x2F;process&#x2F;interpreter pools and concurrent futures, considering I need them anyway, without really needing to introduce yet another unnecessary concurrency paradigm (of asyncio).</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106532&amp;goto=item%3Fid%3D45106189%2345106532" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106600"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45106600' href='vote?id=45106600&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=rcarmo" class="hnuser">rcarmo</a> <span class="age" title="2025-09-02T17:50:27 1756835427"><a href="item?id=45106600">2 hours ago</a></span> <span id="unv_45106600"></span><span class="navs"> | <a href="#45106532" class="clicky" aria-hidden="true">parent</a> | <a href="#45106877" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106600" n="2" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">You should look into the various Pool classes. Back when asyncio came about, I did a lot of experimenting with various multi-core approaches: <a href="https:&#x2F;&#x2F;github.com&#x2F;rcarmo&#x2F;newsfeed-corpus" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;rcarmo&#x2F;newsfeed-corpus</a></div><div class="reply"><p><font size="1"><u><a href="reply?id=45106600&amp;goto=item%3Fid%3D45106189%2345106600" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45108152"><td><table border="0"><tr><td class="ind" indent="2"><img src="s.gif" height="1" width="80"></td><td valign="top" class="votelinks"><center><a id='up_45108152' href='vote?id=45108152&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=OutOfHere" class="hnuser">OutOfHere</a> <span class="age" title="2025-09-02T19:50:52 1756842652"><a href="item?id=45108152">28 minutes ago</a></span> <span id="unv_45108152"></span><span class="navs"> | <a href="#45106532" class="clicky" aria-hidden="true">root</a> | <a href="#45106600" class="clicky" aria-hidden="true">parent</a> | <a href="#45106877" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45108152" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">If you&#x27;re using pools anyway, is there something that you really still need asyncio for?</div><div class="reply"><p><font size="1"><u><a href="reply?id=45108152&amp;goto=item%3Fid%3D45106189%2345108152" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106877"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106877' href='vote?id=45106877&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=cyberax" class="hnuser">cyberax</a> <span class="age" title="2025-09-02T18:09:57 1756836597"><a href="item?id=45106877">2 hours ago</a></span> <span id="unv_45106877"></span><span class="navs"> | <a href="#45106532" class="clicky" aria-hidden="true">prev</a> | <a href="#45106671" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45106877" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">To add to this, async in Python is also plain buggy. For example, uvicorn is the most popular FastAPI server, and it leaks contexts across requests in the default installation.<p>The bug has been open for 2 years, with zero fucks given. The workaround is &quot;just use libuv&quot;: <a href="https:&#x2F;&#x2F;github.com&#x2F;encode&#x2F;uvicorn&#x2F;issues&#x2F;2167" rel="nofollow">https:&#x2F;&#x2F;github.com&#x2F;encode&#x2F;uvicorn&#x2F;issues&#x2F;2167</a><p>I&#x27;ve seen other such cases, and I just gave up on trying to use async.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106877&amp;goto=item%3Fid%3D45106189%2345106877" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45106671"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45106671' href='vote?id=45106671&amp;how=up&amp;goto=item%3Fid%3D45106189'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=ilaksh" class="hnuser">ilaksh</a> <span class="age" title="2025-09-02T17:55:23 1756835723"><a href="item?id=45106671">2 hours ago</a></span> <span id="unv_45106671"></span><span class="navs"> | <a href="#45106877" class="clicky" aria-hidden="true">prev</a> <a class="togg clicky" id="45106671" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c73">There is a fundamental misunderstanding about popularity. People think that popularity is directly related to merit or rationality.<p>Technical things are largely popular for the same reason non-technical things are popular: trends. In other words, they are popular because other people perceive them to be popular. Humans are herd animals.<p>async is harder and associated with Node.js&#x2F;JavaScript which probably makes it uncool for a certain influential python subculture.<p>But actually Fast API has basically taken over and now I think people should recognize that means async IS popular in python at this point.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45106671&amp;goto=item%3Fid%3D45106189%2345106671" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr></table><br><br>
</td></tr><tr><td><img src="s.gif" height="10" width="0"><table width="100%" cellspacing="0" cellpadding="1"><tr><td bgcolor="#ff6600"></td></tr></table><br>
<center><span class="yclinks"><a href="newsguidelines.html">Guidelines</a> | <a href="newsfaq.html">FAQ</a> | <a href="lists">Lists</a> | <a href="https://github.com/HackerNews/API">API</a> | <a href="security.html">Security</a> | <a href="https://www.ycombinator.com/legal/">Legal</a> | <a href="https://www.ycombinator.com/apply/">Apply to YC</a> | <a href="mailto:hn@ycombinator.com">Contact</a></span><br><br>
<form method="get" action="//hn.algolia.com/">Search: <input type="text" name="q" size="17" autocorrect="off" spellcheck="false" autocapitalize="off" autocomplete="off"></form></center></td></tr></table></center></body><script type="text/javascript" src="hn.js?rdkg5pOPauT7LmsdOtnz"></script></html>