<html lang="en" op="item"><head><meta name="referrer" content="origin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" type="text/css" href="news.css?rdkg5pOPauT7LmsdOtnz"><link rel="icon" href="y18.svg"><link rel="canonical" href="https://news.ycombinator.com/item?id=45106132"><title>The repercussions of a typo in C++ &amp; Rust | Hacker News</title></head><body><center><table id="hnmain" border="0" cellpadding="0" cellspacing="0" width="85%" bgcolor="#f6f6ef"><tr><td bgcolor="#ff6600"><table border="0" cellpadding="0" cellspacing="0" width="100%" style="padding:2px"><tr><td style="width:18px;padding-right:4px"><a href="https://news.ycombinator.com"><img src="y18.svg" width="18" height="18" style="border:1px white solid; display:block"></a></td><td style="line-height:12pt; height:10px;"><span class="pagetop"><b class="hnname"><a href="news">Hacker News</a></b><a href="newest">new</a> | <a href="front">past</a> | <a href="newcomments">comments</a> | <a href="ask">ask</a> | <a href="show">show</a> | <a href="jobs">jobs</a> | <a href="submit" rel="nofollow">submit</a></span></td><td style="text-align:right;padding-right:4px;"><span class="pagetop"><a href="login?goto=item%3Fid%3D45106132">login</a></span></td></tr></table></td></tr><tr style='height:10px'/><tr id="bigbox"><td><table class="fatitem" border="0"><tr class="athing submission" id="45106132"><td align="right" valign="top" class="title"><span class="rank"></span></td><td valign="top" class="votelinks"><center><a id='up_45106132' href='vote?id=45106132&amp;how=up&amp;goto=item%3Fid%3D45106132'><div class='votearrow' title='upvote'></div></a></center></td><td class="title"><span class="titleline"><a href="https://www.nablag.com/rust_cpp_missing_ampersand">The repercussions of a typo in C++ &amp; Rust</a><span class="sitebit comhead"> (<a href="from?site=nablag.com"><span class="sitestr">nablag.com</span></a>)</span></span></td></tr><tr><td colspan="2"></td><td class="subtext"><span class="subline"><span class="score" id="score_45106132">17 points</span> by <a href="user?id=nablags" class="hnuser">nablags</a> <span class="age" title="2025-09-02T17:22:01 1756833721"><a href="item?id=45106132">2 hours ago</a></span> <span id="unv_45106132"></span> | <a href="hide?id=45106132&amp;goto=item%3Fid%3D45106132">hide</a> | <a href="https://hn.algolia.com/?query=The%20repercussions%20of%20a%20typo%20in%20C%2B%2B%20%26%20Rust&type=story&dateRange=all&sort=byDate&storyText=false&prefix&page=0" class="hnpast">past</a> | <a href="fave?id=45106132&amp;auth=e74c128c77b8e415c7479e012709a019c591b269">favorite</a> | <a href="item?id=45106132">4&nbsp;comments</a></span></td></tr><tr><td colspan="2"></td><td><div class="toptext"></div></td></tr><tr style='height:6px'/><tr><td colspan="2"></td><td><form action="comment" method="post"><input type="hidden" name="parent" value="45106132"><input type="hidden" name="goto" value="item?id=45106132"><input type="hidden" name="hmac" value="b948e19f3458d0c26a947a4f3c8b0edf27e7ca9b"><textarea name="text" rows="8" cols="80" wrap="virtual"></textarea><br><br>
<input type="submit" value="add comment"></form></td></tr></table><br>
<table border="0" class="comment-tree"><tr class="athing comtr" id="45108003"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45108003' href='vote?id=45108003&amp;how=up&amp;goto=item%3Fid%3D45106132'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=Arnavion" class="hnuser">Arnavion</a> <span class="age" title="2025-09-02T19:38:13 1756841893"><a href="item?id=45108003">41 minutes ago</a></span> <span id="unv_45108003"></span><span class="navs"> | <a href="#45107738" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45108003" n="2" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Rust&#x27;s behavior of moving without leaving a moved-out shell behind also simplifies the implementation of the type itself, because its dtor doesn&#x27;t have to handle the special case of a moved-out shell, and the type doesn&#x27;t even need to be able to represent a moved-out shell.<p>For example, a moved-out-from tree in C++ could represent this by having its inner root pointer be nullptr, and then its dtor would have to check for the root being nullptr, and all its member fns would have the danger of UB (nullptr dereference) if the caller called them on a moved-out shell. But the Rust version could use a non-nullable pointer type (Box), and its dtor and member fns would be guaranteed to act on a valid pointer.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45108003&amp;goto=item%3Fid%3D45106132%2345108003" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45108058"><td><table border="0"><tr><td class="ind" indent="1"><img src="s.gif" height="1" width="40"></td><td valign="top" class="votelinks"><center><a id='up_45108058' href='vote?id=45108058&amp;how=up&amp;goto=item%3Fid%3D45106132'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=nixpulvis" class="hnuser">nixpulvis</a> <span class="age" title="2025-09-02T19:42:08 1756842128"><a href="item?id=45108058">37 minutes ago</a></span> <span id="unv_45108058"></span><span class="navs"> | <a href="#45108003" class="clicky" aria-hidden="true">parent</a> | <a href="#45107738" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45108058" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">This was one of the most unsatisfying things about learning C++ move semantics. They only kinda move the thing, leaving this shell behind is a nightmare.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45108058&amp;goto=item%3Fid%3D45106132%2345108058" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107738"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45107738' href='vote?id=45107738&amp;how=up&amp;goto=item%3Fid%3D45106132'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=SuperV1234" class="hnuser">SuperV1234</a> <span class="age" title="2025-09-02T19:18:00 1756840680"><a href="item?id=45107738">1 hour ago</a></span> <span id="unv_45107738"></span><span class="navs"> | <a href="#45108003" class="clicky" aria-hidden="true">prev</a> | <a href="#45107949" class="clicky" aria-hidden="true">next</a> <a class="togg clicky" id="45107738" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c00">Note that taking a &#x27;const&#x27; by-value parameter is very sensible in some cases, so it is not something that could be detected as a typo by the C++ compiler in general.</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107738&amp;goto=item%3Fid%3D45106132%2345107738" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr><tr class="athing comtr" id="45107949"><td><table border="0"><tr><td class="ind" indent="0"><img src="s.gif" height="1" width="0"></td><td valign="top" class="votelinks"><center><a id='up_45107949' href='vote?id=45107949&amp;how=up&amp;goto=item%3Fid%3D45106132'><div class='votearrow' title='upvote'></div></a></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px;"><span class="comhead"><a href="user?id=on_the_train" class="hnuser">on_the_train</a> <span class="age" title="2025-09-02T19:33:43 1756841623"><a href="item?id=45107949">45 minutes ago</a></span> <span id="unv_45107949"></span><span class="navs"> | <a href="#45107738" class="clicky" aria-hidden="true">prev</a> <a class="togg clicky" id="45107949" n="1" href="javascript:void(0)">[–]</a><span class="onstory"></span></span></span></div><br>
<div class="comment"><div class="commtext c5A">&gt; There are plenty of linters and tools to detect issues like this (ex: clang-tidy can scan for unnecessary value params)<p>Exactly, this is not an issue in any reasonable setup because static analysis catches (and fixes!) this reliably.<p>&gt; but evidently these issues go unnoticed until a customer complains about it or someone actually bothers to profile the code.<p>No</div><div class="reply"><p><font size="1"><u><a href="reply?id=45107949&amp;goto=item%3Fid%3D45106132%2345107949" rel="nofollow">reply</a></u></font></div></div></td></tr></table></td></tr></table><br><br>
</td></tr><tr><td><img src="s.gif" height="10" width="0"><table width="100%" cellspacing="0" cellpadding="1"><tr><td bgcolor="#ff6600"></td></tr></table><br>
<center><span class="yclinks"><a href="newsguidelines.html">Guidelines</a> | <a href="newsfaq.html">FAQ</a> | <a href="lists">Lists</a> | <a href="https://github.com/HackerNews/API">API</a> | <a href="security.html">Security</a> | <a href="https://www.ycombinator.com/legal/">Legal</a> | <a href="https://www.ycombinator.com/apply/">Apply to YC</a> | <a href="mailto:hn@ycombinator.com">Contact</a></span><br><br>
<form method="get" action="//hn.algolia.com/">Search: <input type="text" name="q" size="17" autocorrect="off" spellcheck="false" autocapitalize="off" autocomplete="off"></form></center></td></tr></table></center></body><script type="text/javascript" src="hn.js?rdkg5pOPauT7LmsdOtnz"></script></html>